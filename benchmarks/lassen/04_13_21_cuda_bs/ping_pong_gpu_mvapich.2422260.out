Warning: Failed writing log files to directory [/var/log/nvidia-mps]. No logs will be available.
Profiling GPU Ping-Pongs
GPU on rank 0 and GPU on rank 1:	7.381439e-07	6.695986e-07	7.096529e-07	6.875992e-07	7.147789e-07	7.027388e-07	7.157326e-07	7.342100e-07	7.699728e-07	8.366108e-07	1.089692e-06	1.350164e-06	2.733016e-05	1.487601e-05	1.629460e-05	1.681089e-05	1.881242e-05	2.263665e-05	3.015518e-05	4.536510e-05	7.546306e-05	1.365781e-04	2.574921e-04	4.984498e-04	
GPU on rank 0 and GPU on rank 2:	1.070499e-06	1.073003e-06	1.082778e-06	9.796619e-07	9.876490e-07	1.029611e-06	1.131654e-06	1.251817e-06	1.490235e-06	1.745701e-06	2.209187e-06	2.989769e-06	2.896321e-05	1.665962e-05	1.658976e-05	1.827121e-05	2.150297e-05	2.762914e-05	4.058123e-05	6.566763e-05	1.164174e-04	2.189279e-04	4.250765e-04	8.319736e-04	
GPU on rank 0 and GPU on rank 3:	1.094103e-06	1.093864e-06	1.075149e-06	1.001477e-06	1.009822e-06	1.056314e-06	1.069069e-06	1.424670e-06	1.517653e-06	1.710534e-06	2.160788e-06	3.001451e-06	2.931738e-05	1.606989e-05	1.676345e-05	1.849413e-05	2.150774e-05	2.807140e-05	4.085660e-05	6.647468e-05	1.179111e-04	2.209663e-04	4.262805e-04	8.352041e-04	
GPU on rank 0 and GPU on rank 4:	2.104878e-06	2.096415e-06	2.134085e-06	2.130270e-06	2.142668e-06	2.186060e-06	2.477765e-06	2.535462e-06	2.637863e-06	3.191829e-06	6.409407e-06	7.053018e-06	2.352858e-05	2.630436e-05	2.625227e-05	3.012180e-05	5.416155e-05	7.246614e-05	9.422898e-05	1.500428e-04	2.664495e-04	5.066991e-04	9.735107e-04	1.899266e-03	
GPU on rank 0 and GPU on rank 5:	2.069592e-06	2.083540e-06	2.172709e-06	2.126455e-06	2.145767e-06	2.171993e-06	2.475739e-06	2.524734e-06	2.666950e-06	3.175616e-06	6.448030e-06	6.956816e-06	2.364278e-05	2.473533e-05	2.641010e-05	3.205180e-05	5.421877e-05	7.481217e-05	9.406805e-05	1.504731e-04	2.662921e-04	5.066276e-04	9.735346e-04	1.898742e-03	
GPU on rank 0 and GPU on rank 6:	2.184629e-06	2.182841e-06	2.261162e-06	2.235889e-06	2.249599e-06	2.250671e-06	2.618790e-06	2.663732e-06	2.831697e-06	3.262520e-06	6.553292e-06	6.869793e-06	2.389133e-05	2.489412e-05	2.647471e-05	3.021836e-05	5.425215e-05	7.246256e-05	9.403944e-05	1.502705e-04	2.662849e-04	5.061388e-04	9.730935e-04	1.897538e-03	
GPU on rank 0 and GPU on rank 7:	2.091765e-06	2.125025e-06	2.182007e-06	2.170920e-06	2.209306e-06	2.269983e-06	2.557278e-06	2.599716e-06	2.848983e-06	3.103256e-06	6.484747e-06	6.879807e-06	2.388835e-05	2.485800e-05	2.658010e-05	3.063440e-05	5.414963e-05	7.252336e-05	9.412408e-05	1.503062e-04	2.660704e-04	5.074978e-04	9.734392e-04	1.897454e-03	
GPU on rank 1 and GPU on rank 2:	1.057506e-06	1.043797e-06	1.041293e-06	9.896755e-07	9.948015e-07	1.033425e-06	1.059890e-06	1.227379e-06	1.419544e-06	1.633525e-06	2.091765e-06	2.960324e-06	2.947497e-05	1.609850e-05	1.685703e-05	1.861334e-05	2.178788e-05	2.817273e-05	4.097819e-05	6.667614e-05	1.178122e-04	2.211690e-04	4.248261e-04	8.340716e-04	
GPU on rank 1 and GPU on rank 3:	1.081586e-06	1.080513e-06	1.078367e-06	1.018405e-06	1.012325e-06	1.034975e-06	1.062512e-06	1.315713e-06	1.477718e-06	1.797318e-06	2.197027e-06	3.101349e-06	2.940774e-05	1.600242e-05	1.677549e-05	1.833081e-05	2.147675e-05	2.800822e-05	4.105926e-05	6.686091e-05	1.189196e-04	2.228260e-04	4.271030e-04	8.352518e-04	
GPU on rank 1 and GPU on rank 4:	2.092838e-06	2.075672e-06	2.098322e-06	2.101541e-06	2.101898e-06	2.137899e-06	2.465248e-06	2.503157e-06	2.608776e-06	3.867507e-06	6.329417e-06	6.963849e-06	2.509081e-05	2.470732e-05	2.646494e-05	3.040910e-05	5.418181e-05	7.276058e-05	9.440422e-05	1.503611e-04	2.663136e-04	5.068064e-04	9.724379e-04	1.897609e-03	
GPU on rank 1 and GPU on rank 5:	2.081871e-06	2.078056e-06	2.111435e-06	2.118826e-06	2.117395e-06	2.156138e-06	2.432466e-06	2.501130e-06	2.577186e-06	3.119111e-06	9.081125e-06	7.014990e-06	2.368915e-05	2.465975e-05	2.639759e-05	2.996683e-05	5.426884e-05	7.283449e-05	9.426236e-05	1.503742e-04	2.661526e-04	5.058885e-04	9.728909e-04	1.896310e-03	
GPU on rank 1 and GPU on rank 6:	2.161384e-06	2.157927e-06	2.228022e-06	2.219200e-06	2.233386e-06	2.269983e-06	2.538800e-06	2.619028e-06	2.775311e-06	3.237605e-06	6.468296e-06	6.886363e-06	2.384651e-05	2.482641e-05	2.645922e-05	3.028750e-05	5.429029e-05	7.284880e-05	9.436131e-05	1.504183e-04	2.664161e-04	5.058289e-04	9.720683e-04	1.896989e-03	
GPU on rank 1 and GPU on rank 7:	2.128720e-06	2.117515e-06	2.157211e-06	2.156019e-06	2.170086e-06	2.241611e-06	2.533793e-06	2.582073e-06	2.844691e-06	3.105879e-06	6.466627e-06	6.878734e-06	2.384520e-05	2.485800e-05	2.652884e-05	3.038168e-05	5.432487e-05	7.273793e-05	9.421468e-05	1.506317e-04	2.664161e-04	5.065084e-04	9.722471e-04	1.895165e-03	
GPU on rank 2 and GPU on rank 3:	7.640123e-07	7.551908e-07	7.723570e-07	7.396936e-07	7.523298e-07	7.652044e-07	7.486343e-07	7.584095e-07	8.218288e-07	9.046793e-07	1.082778e-06	1.356959e-06	2.741480e-05	1.499534e-05	1.560521e-05	1.676083e-05	1.880050e-05	2.276778e-05	3.022075e-05	4.545808e-05	7.556081e-05	1.364827e-04	2.572179e-04	4.985094e-04	
GPU on rank 2 and GPU on rank 4:	2.149224e-06	2.136469e-06	2.213836e-06	2.195954e-06	2.216935e-06	2.267718e-06	2.581000e-06	2.617598e-06	2.792835e-06	3.208399e-06	6.540656e-06	6.855011e-06	2.370751e-05	2.493370e-05	2.669048e-05	3.044367e-05	5.451083e-05	7.286429e-05	9.427309e-05	1.504886e-04	2.661932e-04	5.065203e-04	9.729266e-04	1.897395e-03	
GPU on rank 2 and GPU on rank 5:	2.127886e-06	2.101183e-06	2.164125e-06	2.158523e-06	2.177954e-06	2.247214e-06	2.580762e-06	2.629161e-06	2.772689e-06	3.197551e-06	6.540298e-06	6.797671e-06	2.366114e-05	2.484095e-05	2.667415e-05	3.035784e-05	6.340981e-05	7.285357e-05	9.431362e-05	1.504946e-04	2.662385e-04	5.056977e-04	9.716153e-04	1.895499e-03	
GPU on rank 2 and GPU on rank 6:	2.244949e-06	2.238870e-06	2.265453e-06	2.249718e-06	2.251506e-06	2.276421e-06	2.655506e-06	2.695084e-06	2.931595e-06	3.243566e-06	6.672621e-06	6.949067e-06	2.408147e-05	2.512538e-05	2.670777e-05	3.034592e-05	5.434394e-05	7.260799e-05	9.426117e-05	1.502621e-04	2.663100e-04	5.057096e-04	9.722233e-04	1.895928e-03	
GPU on rank 2 and GPU on rank 7:	2.121687e-06	2.115726e-06	2.152085e-06	2.150416e-06	2.166152e-06	2.276659e-06	2.632618e-06	2.679467e-06	2.851605e-06	3.196001e-06	6.474853e-06	6.997824e-06	2.399492e-05	2.508593e-05	2.680707e-05	3.054976e-05	5.441785e-05	7.256389e-05	9.398103e-05	1.502228e-04	2.659249e-04	5.054593e-04	9.718299e-04	1.894808e-03	
GPU on rank 3 and GPU on rank 4:	2.127886e-06	2.102494e-06	2.144814e-06	2.142072e-06	2.186656e-06	2.218604e-06	2.535939e-06	3.836989e-06	2.801299e-06	3.150582e-06	6.512880e-06	6.943703e-06	2.367914e-05	2.479970e-05	2.651191e-05	3.033519e-05	5.433440e-05	7.250071e-05	9.414673e-05	1.503229e-04	2.666628e-04	5.073190e-04	9.734869e-04	1.900280e-03	
GPU on rank 3 and GPU on rank 5:	2.141237e-06	2.124071e-06	2.174616e-06	2.176762e-06	2.172351e-06	2.220154e-06	2.568007e-06	2.637863e-06	2.823114e-06	3.168583e-06	6.593823e-06	6.872416e-06	2.371800e-05	2.484107e-05	2.648234e-05	3.007293e-05	5.430102e-05	7.280111e-05	9.415030e-05	1.504195e-04	2.663779e-04	5.065680e-04	9.723663e-04	1.896727e-03	
GPU on rank 3 and GPU on rank 6:	2.170444e-06	2.161980e-06	2.192736e-06	3.320575e-06	2.186775e-06	2.383828e-06	2.598524e-06	2.686143e-06	2.799511e-06	3.238916e-06	6.549358e-06	7.140636e-06	2.404046e-05	2.499175e-05	2.651274e-05	3.028154e-05	5.439162e-05	7.290006e-05	9.425521e-05	1.505995e-04	2.660167e-04	5.057573e-04	9.708881e-04	1.893687e-03	
GPU on rank 3 and GPU on rank 7:	2.094150e-06	2.094865e-06	2.154350e-06	2.161503e-06	2.160311e-06	2.230525e-06	2.500534e-06	2.570868e-06	2.711654e-06	3.186584e-06	6.455898e-06	7.083774e-06	2.392602e-05	2.480698e-05	2.644026e-05	3.025651e-05	5.432129e-05	7.254601e-05	9.406567e-05	1.504660e-04	2.662539e-04	5.072355e-04	9.712577e-04	1.896274e-03	


app 0: ./time_ping_pong_gpu 
rank: 0: { host: 1; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 1: { host: 1; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 2: { host: 1; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 3: { host: 1; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 4: { host: 2; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 5: { host: 2; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 6: { host: 2; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 7: { host: 2; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0

------------------------------------------------------------
Sender: LSF System <lsfadmin@lassen710>
Subject: Job 2422260: <ping_pong_gpu_mvapich> in cluster <lassen> Done

Job <ping_pong_gpu_mvapich> was submitted from host <lassen709> by user <locksl> in cluster <lassen> at Tue Apr 13 11:10:09 2021
Job was executed on host(s) <1*lassen710>, in queue <pdebug>, as user <locksl> in cluster <lassen> at Tue Apr 13 11:10:11 2021
                            <40*lassen35>
                            <40*lassen32>
</g/g16/locksl> was used as the home directory.
</g/g16/locksl/bin/bench_press_scripts> was used as the working directory.
Started at Tue Apr 13 11:10:11 2021
Terminated at Tue Apr 13 11:10:40 2021
Results reported at Tue Apr 13 11:10:40 2021

Your job looked like:

------------------------------------------------------------
# LSBATCH: User input
#!/bin/bash
#BSUB -J ping_pong_gpu_mvapich
#BSUB -e ping_pong_gpu_mvapich.%J.err
#BSUB -o ping_pong_gpu_mvapich.%J.out
#BSUB -nnodes 2
#BSUB -q pdebug
#BSUB -W 00:15

module load gcc
module load cuda
module load mvapich2

# Default paramter values for mvapich2
export MV2_USE_CUDA=1
export MV2_USE_GDR=1

# TESTING PARAMETER
#export MV2_CUDA_BLOCK_SIZE=131072
#export MV2_CUDA_BLOCK_SIZE=262144
export MV2_CUDA_BLOCK_SIZE=524288
#export MV2_CUDA_BLOCK_SIZE=786432
#export MV2_CUDA_BLOCK_SIZE=1048576
#export MV2_CUDA_BLOCK_SIZE=1310720

export MV2_GPUDIRECT_LIMIT=8192
export MV2_USE_GPUDIRECT_RECEIVE_LIMIT=131072
export MV2_CUDA_IPC_THRESHOLD=32768
#export MV2_CUDA_IPC_THRESHOLD=524288

# Parameters for tuning block size limit for gpu to cpu memory copies with gdr
export MV2_GDRCOPY_LIMIT=8192

# Parameter setting for Multi-IB and Multi-GPU node
#export MV2_PROCESS_TO_RAIL_MAPPING=BUNCH # not currently working with multiple resource set allocation

cd /g/g16/locksl/BenchPress/mvapich_build/examples

nvidia-cuda-mps-control -d

#jsrun -a4 -c4 -g4 -r1 -n2 -M "-gpu" --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./time_ping_pong_gpu
jsrun -a4 -c4 -g4 -r1 -n2 --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./time_ping_pong_gpu

echo quit | nvidia-cuda-mps-control



------------------------------------------------------------

Successfully completed.

Resource usage summary:

    CPU time :                                   0.25 sec.
    Max Memory :                                 -
    Average Memory :                             -
    Total Requested Memory :                     -
    Delta Memory :                               -
    Max Swap :                                   -
    Max Processes :                              -
    Max Threads :                                -
    Run time :                                   29 sec.
    Turnaround time :                            31 sec.

The output (if any) is above this job summary.



PS:

Read file <ping_pong_gpu_mvapich.2422260.err> for stderr output of this job.

