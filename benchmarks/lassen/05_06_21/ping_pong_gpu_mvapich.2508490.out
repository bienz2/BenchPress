Warning: Failed writing log files to directory [/var/log/nvidia-mps]. No logs will be available.
Profiling GPU Ping-Pongs
GPU on rank 0 and GPU on rank 1:	9.067059e-07	9.108782e-07	9.022951e-07	8.640289e-07	8.600950e-07	8.814335e-07	9.193420e-07	9.438992e-07	1.011372e-06	1.135826e-06	1.338243e-06	1.768708e-06	2.609968e-06	4.213929e-06	2.608883e-05	1.734853e-05	1.925826e-05	2.307653e-05	3.098130e-05	4.519701e-05	7.533431e-05	1.379013e-04	2.572536e-04	4.992247e-04	
GPU on rank 0 and GPU on rank 2:	1.070857e-06	1.060128e-06	1.051784e-06	9.728670e-07	9.853840e-07	1.006007e-06	1.116872e-06	1.267314e-06	1.496792e-06	1.705408e-06	2.134323e-06	2.940655e-06	4.660964e-06	8.220196e-06	2.800894e-05	1.818180e-05	2.131462e-05	2.762198e-05	4.029274e-05	6.665707e-05	1.162124e-04	2.192259e-04	4.243016e-04	8.331895e-04	
GPU on rank 0 and GPU on rank 3:	1.095295e-06	1.087308e-06	1.087427e-06	9.939671e-07	1.022935e-06	1.060963e-06	1.088977e-06	1.253247e-06	1.448393e-06	1.696587e-06	2.123117e-06	2.906799e-06	4.912853e-06	8.490801e-06	2.867401e-05	1.877069e-05	2.209663e-05	2.857447e-05	4.149199e-05	6.686211e-05	1.177132e-04	2.204657e-04	4.254580e-04	8.343577e-04	
GPU on rank 0 and GPU on rank 4:	2.043128e-06	2.036572e-06	2.097726e-06	2.107382e-06	2.092481e-06	2.141833e-06	2.410412e-06	2.517104e-06	2.553105e-06	3.073335e-06	6.405354e-06	6.869674e-06	7.265925e-06	8.419275e-06	2.559185e-05	3.018498e-05	3.695846e-05	5.160689e-05	8.055210e-05	1.233184e-04	2.407122e-04	4.415512e-04	8.438706e-04	1.647890e-03	
GPU on rank 0 and GPU on rank 5:	2.060890e-06	2.035975e-06	2.077579e-06	2.074838e-06	2.093315e-06	2.131581e-06	2.412558e-06	2.458692e-06	2.578735e-06	3.097177e-06	6.337881e-06	6.826043e-06	7.199883e-06	8.396626e-06	2.568662e-05	2.933383e-05	3.721833e-05	5.161285e-05	8.049607e-05	1.235318e-04	2.413356e-04	4.424214e-04	8.437157e-04	1.644361e-03	
GPU on rank 0 and GPU on rank 6:	2.140641e-06	2.151847e-06	2.198935e-06	2.195716e-06	3.243089e-06	2.243400e-06	2.546191e-06	2.613425e-06	2.767682e-06	3.170609e-06	6.513596e-06	6.778479e-06	7.225513e-06	8.498549e-06	2.655590e-05	2.982378e-05	3.746510e-05	5.181074e-05	8.081198e-05	1.238346e-04	2.414739e-04	4.420161e-04	8.450150e-04	1.642632e-03	
GPU on rank 0 and GPU on rank 7:	2.127409e-06	2.074599e-06	2.153635e-06	6.581426e-06	2.165675e-06	2.204299e-06	2.510071e-06	2.574921e-06	2.765656e-06	3.070951e-06	6.400347e-06	6.757021e-06	8.225799e-06	8.452177e-06	2.623117e-05	2.961993e-05	3.735185e-05	5.188227e-05	8.055925e-05	1.235676e-04	2.409947e-04	4.416823e-04	8.453131e-04	2.422726e-03	
GPU on rank 1 and GPU on rank 2:	1.092792e-06	1.091480e-06	1.086950e-06	1.011491e-06	1.017332e-06	1.045108e-06	1.087308e-06	1.380324e-06	1.449108e-06	1.735926e-06	2.100587e-06	2.962589e-06	4.587173e-06	8.053184e-06	2.845967e-05	1.846313e-05	2.178550e-05	2.786636e-05	4.093647e-05	6.637812e-05	1.177633e-04	2.205372e-04	4.259229e-04	8.351564e-04	
GPU on rank 1 and GPU on rank 3:	1.101017e-06	1.101851e-06	1.104832e-06	1.028299e-06	1.027942e-06	1.056671e-06	1.152754e-06	1.360059e-06	1.490474e-06	1.797318e-06	2.196074e-06	3.016591e-06	4.755974e-06	8.903503e-06	2.863443e-05	1.837850e-05	2.150774e-05	2.807975e-05	4.105568e-05	6.729841e-05	1.190484e-04	2.232194e-04	4.271984e-04	8.346796e-04	
GPU on rank 1 and GPU on rank 4:	2.123833e-06	2.103806e-06	2.124548e-06	2.121687e-06	2.130389e-06	2.159357e-06	2.450705e-06	2.539277e-06	2.621531e-06	3.143787e-06	6.323576e-06	6.844521e-06	7.269979e-06	8.497596e-06	2.581108e-05	2.972245e-05	3.751993e-05	5.192399e-05	8.080125e-05	1.240885e-04	2.412319e-04	4.422903e-04	8.446693e-04	2.430415e-03	
GPU on rank 1 and GPU on rank 5:	2.073765e-06	2.093792e-06	2.136946e-06	2.324343e-06	2.138615e-06	2.140880e-06	2.431035e-06	2.473354e-06	2.590537e-06	3.123760e-06	8.774996e-06	6.801605e-06	7.274270e-06	8.461356e-06	2.571130e-05	2.981544e-05	3.750920e-05	5.190015e-05	8.098841e-05	1.239622e-04	2.418590e-04	4.418969e-04	8.451581e-04	1.643336e-03	
GPU on rank 1 and GPU on rank 6:	2.152681e-06	2.125859e-06	2.200961e-06	2.205610e-06	2.220631e-06	2.264500e-06	2.566576e-06	2.638459e-06	2.753139e-06	3.194928e-06	6.424069e-06	6.703019e-06	7.192731e-06	8.437395e-06	2.590227e-05	2.972364e-05	3.746510e-05	5.200386e-05	8.105040e-05	1.237833e-04	2.414346e-04	4.416943e-04	8.432865e-04	1.642168e-03	
GPU on rank 1 and GPU on rank 7:	2.114177e-06	2.107143e-06	2.127647e-06	2.137303e-06	2.124667e-06	2.153039e-06	2.549529e-06	2.576590e-06	2.778172e-06	3.091574e-06	6.306529e-06	6.788969e-06	7.198215e-06	8.461952e-06	2.583313e-05	2.957106e-05	3.744841e-05	5.198359e-05	8.099318e-05	1.235604e-04	2.412105e-04	4.410267e-04	8.436441e-04	1.643634e-03	
GPU on rank 2 and GPU on rank 3:	7.494688e-07	7.393360e-07	7.667542e-07	7.489920e-07	7.679462e-07	7.406473e-07	7.562637e-07	7.823706e-07	8.273125e-07	8.761883e-07	1.049280e-06	1.323462e-06	1.811624e-06	2.672434e-06	2.716541e-05	1.675606e-05	1.899481e-05	2.283692e-05	3.034115e-05	4.540563e-05	7.531524e-05	1.360893e-04	2.559304e-04	4.958868e-04	
GPU on rank 2 and GPU on rank 4:	2.192616e-06	2.182126e-06	2.262831e-06	2.242088e-06	2.264023e-06	2.239704e-06	2.641439e-06	2.671957e-06	2.832174e-06	3.261089e-06	6.554842e-06	6.802678e-06	7.323027e-06	8.554339e-06	2.632821e-05	3.031135e-05	3.799558e-05	5.244851e-05	8.122802e-05	1.241040e-04	2.423060e-04	4.438877e-04	8.471966e-04	1.648319e-03	
GPU on rank 2 and GPU on rank 5:	2.174139e-06	2.163053e-06	2.210855e-06	2.200484e-06	2.214313e-06	2.259970e-06	2.710342e-06	2.639771e-06	2.818346e-06	3.230929e-06	6.527305e-06	6.760836e-06	7.314682e-06	8.523583e-06	2.729428e-05	3.024817e-05	4.390717e-05	5.242348e-05	8.137703e-05	1.241136e-04	2.430034e-04	4.434347e-04	8.472323e-04	1.648462e-03	
GPU on rank 2 and GPU on rank 6:	2.252102e-06	2.245426e-06	2.293587e-06	2.303362e-06	2.300262e-06	2.341270e-06	2.676487e-06	2.730608e-06	2.925277e-06	3.363252e-06	6.639481e-06	6.986976e-06	7.441163e-06	8.682251e-06	2.644002e-05	3.029823e-05	3.799915e-05	5.224824e-05	8.126736e-05	1.238573e-04	2.423179e-04	4.433155e-04	8.471847e-04	1.645851e-03	
GPU on rank 2 and GPU on rank 7:	2.197266e-06	2.195716e-06	2.237320e-06	2.249479e-06	2.262354e-06	2.309203e-06	2.607942e-06	2.655745e-06	2.808332e-06	3.225327e-06	6.366134e-06	6.968498e-06	7.453918e-06	8.687019e-06	2.634072e-05	3.008246e-05	3.782630e-05	5.227566e-05	8.100390e-05	1.237047e-04	2.421808e-04	4.428625e-04	8.460283e-04	1.646197e-03	
GPU on rank 3 and GPU on rank 4:	2.163887e-06	2.159119e-06	2.200365e-06	2.189040e-06	2.206206e-06	2.248049e-06	2.594829e-06	3.934503e-06	2.846599e-06	3.159642e-06	6.480217e-06	6.871223e-06	7.341266e-06	8.602262e-06	2.643132e-05	3.021717e-05	3.802061e-05	5.238891e-05	8.134007e-05	1.241958e-04	2.421498e-04	4.429340e-04	8.457780e-04	1.647902e-03	
GPU on rank 3 and GPU on rank 5:	2.147198e-06	2.138734e-06	2.193809e-06	2.202511e-06	2.194285e-06	2.261162e-06	2.567291e-06	2.611876e-06	2.840638e-06	3.164530e-06	6.497979e-06	6.748796e-06	7.276058e-06	8.528471e-06	2.630329e-05	3.005028e-05	3.796101e-05	5.243540e-05	8.156419e-05	1.242220e-04	2.424085e-04	4.434466e-04	8.478522e-04	1.646817e-03	
GPU on rank 3 and GPU on rank 6:	2.180099e-06	2.156734e-06	2.221584e-06	2.204299e-06	2.202868e-06	2.264619e-06	2.607584e-06	2.667904e-06	2.843499e-06	3.260732e-06	6.414533e-06	6.913543e-06	7.426858e-06	8.606911e-06	2.641439e-05	3.026009e-05	3.786802e-05	5.234838e-05	8.110881e-05	1.240528e-04	2.424431e-04	4.429460e-04	9.060264e-04	1.645768e-03	
GPU on rank 3 and GPU on rank 7:	2.133965e-06	2.114415e-06	2.153158e-06	2.155423e-06	2.158999e-06	2.224326e-06	2.547622e-06	2.574325e-06	2.698898e-06	3.207922e-06	6.205082e-06	6.891608e-06	7.371902e-06	8.573532e-06	2.621651e-05	2.992749e-05	3.769517e-05	5.232573e-05	8.082390e-05	1.237774e-04	2.417481e-04	4.434943e-04	8.459926e-04	1.648033e-03	


app 0: ./time_ping_pong_gpu 
rank: 0: { host: 1; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 1: { host: 1; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 2: { host: 1; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 3: { host: 1; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 4: { host: 2; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 5: { host: 2; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 6: { host: 2; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 7: { host: 2; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0

------------------------------------------------------------
Sender: LSF System <lsfadmin@lassen710>
Subject: Job 2508490: <ping_pong_gpu_mvapich> in cluster <lassen> Done

Job <ping_pong_gpu_mvapich> was submitted from host <lassen709> by user <locksl> in cluster <lassen> at Thu May  6 11:45:28 2021
Job was executed on host(s) <1*lassen710>, in queue <pdebug>, as user <locksl> in cluster <lassen> at Thu May  6 11:45:30 2021
                            <40*lassen36>
                            <40*lassen33>
</g/g16/locksl> was used as the home directory.
</g/g16/locksl/bin/bench_press_scripts> was used as the working directory.
Started at Thu May  6 11:45:30 2021
Terminated at Thu May  6 11:46:23 2021
Results reported at Thu May  6 11:46:23 2021

Your job looked like:

------------------------------------------------------------
# LSBATCH: User input
#!/bin/bash
#BSUB -J ping_pong_gpu_mvapich
#BSUB -e ping_pong_gpu_mvapich.%J.err
#BSUB -o ping_pong_gpu_mvapich.%J.out
#BSUB -nnodes 2
#BSUB -q pdebug
#BSUB -W 00:15

module load gcc
module load cuda
module load mvapich2

# Default paramter values for mvapich2
export MV2_USE_CUDA=1
export MV2_USE_GDR=1

# TESTING PARAMETER
#export MV2_GPUDIRECT_LIMIT=4096
#export MV2_GPUDIRECT_LIMIT=8192
#export MV2_GPUDIRECT_LIMIT=16384
export MV2_GPUDIRECT_LIMIT=32768

cd /g/g16/locksl/BenchPress/mvapich_build/examples

nvidia-cuda-mps-control -d

jsrun -a4 -c4 -g4 -r1 -n2 --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./time_ping_pong_gpu

echo quit | nvidia-cuda-mps-control



------------------------------------------------------------

Successfully completed.

Resource usage summary:

    CPU time :                                   0.20 sec.
    Max Memory :                                 59 MB
    Average Memory :                             52.57 MB
    Total Requested Memory :                     -
    Delta Memory :                               -
    Max Swap :                                   1425 MB
    Max Processes :                              4
    Max Threads :                                27
    Run time :                                   53 sec.
    Turnaround time :                            55 sec.

The output (if any) is above this job summary.



PS:

Read file <ping_pong_gpu_mvapich.2508490.err> for stderr output of this job.

