Warning: Failed writing log files to directory [/var/log/nvidia-mps]. No logs will be available.
Profiling GPU Ping-Pongs
GPU on rank 0 and GPU on rank 1:	7.632971e-07	7.653236e-07	7.466078e-07	7.607937e-07	7.339716e-07	7.368326e-07	7.050037e-07	7.581711e-07	7.718801e-07	8.677244e-07	1.046181e-06	1.294136e-06	2.739406e-05	1.482868e-05	1.537633e-05	1.668334e-05	1.882434e-05	2.269983e-05	3.019571e-05	4.533291e-05	7.547379e-05	1.366735e-04	2.572894e-04	4.987717e-04	
GPU on rank 0 and GPU on rank 2:	1.072884e-06	1.061559e-06	1.064181e-06	9.765625e-07	9.819269e-07	1.072884e-06	1.083016e-06	1.338005e-06	1.466870e-06	1.768708e-06	2.135992e-06	3.003359e-06	2.876985e-05	1.563990e-05	1.633084e-05	1.807213e-05	2.130151e-05	2.772450e-05	4.026771e-05	6.562352e-05	1.161373e-04	2.187610e-04	4.246593e-04	8.342147e-04	
GPU on rank 0 and GPU on rank 3:	1.088858e-06	1.083851e-06	1.065731e-06	9.928942e-07	1.020908e-06	1.045823e-06	1.080871e-06	1.290560e-06	1.473069e-06	1.693130e-06	2.135873e-06	3.115058e-06	2.891529e-05	1.577222e-05	1.643777e-05	1.803279e-05	2.156615e-05	2.793074e-05	4.054904e-05	6.640077e-05	1.175404e-04	2.208829e-04	4.250884e-04	8.350492e-04	
GPU on rank 0 and GPU on rank 4:	2.093315e-06	2.086043e-06	2.109528e-06	2.107501e-06	2.123356e-06	2.148509e-06	2.430201e-06	2.493143e-06	2.591729e-06	3.078580e-06	6.378531e-06	6.939530e-06	2.337360e-05	2.443600e-05	2.622128e-05	3.010869e-05	5.364299e-05	8.330822e-05	1.037514e-04	1.779056e-04	3.357351e-04	6.524086e-04	1.279032e-03	2.544928e-03	
GPU on rank 0 and GPU on rank 5:	2.066374e-06	2.184510e-06	2.116203e-06	2.120614e-06	2.127290e-06	2.174616e-06	2.466917e-06	2.510428e-06	2.608776e-06	3.131032e-06	6.359458e-06	6.826282e-06	2.330053e-05	2.430797e-05	2.608240e-05	3.005981e-05	5.370498e-05	6.656051e-05	1.040661e-04	1.774693e-04	3.372502e-04	6.507277e-04	1.278389e-03	3.350616e-03	
GPU on rank 0 and GPU on rank 6:	2.169967e-06	2.191782e-06	5.865574e-06	2.205849e-06	3.269792e-06	2.238989e-06	2.510905e-06	2.588749e-06	2.735972e-06	3.194690e-06	6.475210e-06	6.822109e-06	2.519774e-05	2.467990e-05	2.627432e-05	3.025651e-05	5.419850e-05	6.700277e-05	1.045346e-04	1.781607e-04	3.361273e-04	6.530762e-04	1.269329e-03	2.507341e-03	
GPU on rank 0 and GPU on rank 7:	2.126694e-06	2.125859e-06	2.173424e-06	2.177596e-06	2.201200e-06	2.251983e-06	2.561450e-06	2.617121e-06	2.841711e-06	3.136158e-06	6.457210e-06	6.768584e-06	2.355433e-05	2.458596e-05	2.632558e-05	3.059268e-05	5.442262e-05	6.693602e-05	1.043165e-04	1.781189e-04	3.358877e-04	6.535172e-04	1.270008e-03	2.506268e-03	
GPU on rank 1 and GPU on rank 2:	1.060963e-06	1.063228e-06	1.049638e-06	9.847879e-07	9.946823e-07	1.037002e-06	1.061559e-06	1.244307e-06	1.409650e-06	1.643419e-06	2.068043e-06	2.884746e-06	2.937162e-05	1.603401e-05	1.679981e-05	1.839638e-05	2.162933e-05	2.786040e-05	4.075646e-05	6.650686e-05	1.177359e-04	2.213836e-04	4.259706e-04	8.353591e-04	
GPU on rank 1 and GPU on rank 3:	1.043677e-06	1.048565e-06	1.044631e-06	9.630919e-07	9.729862e-07	1.012802e-06	1.108646e-06	1.290441e-06	1.470208e-06	1.794100e-06	2.142191e-06	2.938628e-06	2.908576e-05	1.597285e-05	1.664889e-05	1.835942e-05	2.130628e-05	2.804756e-05	4.108667e-05	6.722689e-05	1.190019e-04	2.228141e-04	4.274368e-04	8.351922e-04	
GPU on rank 1 and GPU on rank 4:	2.081871e-06	2.081156e-06	2.093077e-06	2.146363e-06	2.144694e-06	2.161503e-06	2.449393e-06	2.479672e-06	2.616048e-06	3.128052e-06	6.302953e-06	6.851792e-06	2.352202e-05	2.450311e-05	2.625155e-05	3.000259e-05	5.417943e-05	6.705880e-05	1.047349e-04	1.782870e-04	3.365004e-04	6.529808e-04	1.269507e-03	2.522635e-03	
GPU on rank 1 and GPU on rank 5:	2.037644e-06	2.036214e-06	2.109051e-06	2.097368e-06	2.109051e-06	2.143979e-06	2.387166e-06	2.449155e-06	2.581954e-06	3.159165e-06	9.045243e-06	6.793976e-06	2.341926e-05	2.433908e-05	2.603316e-05	2.993345e-05	5.389929e-05	6.668687e-05	1.044440e-04	1.779616e-04	3.363383e-04	6.527781e-04	1.269972e-03	2.515078e-03	
GPU on rank 1 and GPU on rank 6:	2.140164e-06	2.137899e-06	2.197981e-06	2.196312e-06	2.207756e-06	2.239466e-06	2.565026e-06	2.608061e-06	2.755523e-06	3.176332e-06	6.490946e-06	6.809592e-06	2.363527e-05	2.455640e-05	2.624190e-05	2.998829e-05	5.416036e-05	6.699920e-05	1.046157e-04	1.780832e-04	3.364408e-04	6.526828e-04	1.268601e-03	2.505171e-03	
GPU on rank 1 and GPU on rank 7:	2.142906e-06	2.133131e-06	2.194166e-06	2.188563e-06	2.204895e-06	2.249479e-06	2.508044e-06	2.584696e-06	2.819538e-06	3.094554e-06	6.376863e-06	6.747723e-06	2.366579e-05	2.466500e-05	2.630138e-05	3.046751e-05	5.453110e-05	6.725788e-05	1.047671e-04	1.784372e-04	3.377175e-04	6.535292e-04	1.269722e-03	2.508199e-03	
GPU on rank 2 and GPU on rank 3:	7.468462e-07	7.338524e-07	7.631779e-07	7.735491e-07	7.665157e-07	7.855892e-07	7.900000e-07	8.032322e-07	8.503199e-07	9.082556e-07	1.037717e-06	1.300454e-06	2.713394e-05	1.477814e-05	1.613033e-05	1.661539e-05	1.887918e-05	2.256751e-05	3.015518e-05	4.525304e-05	7.546306e-05	1.366019e-04	2.572417e-04	4.986644e-04	
GPU on rank 2 and GPU on rank 4:	2.148032e-06	2.165556e-06	2.233148e-06	2.173781e-06	2.197981e-06	2.255201e-06	2.598643e-06	2.617121e-06	2.796769e-06	3.199339e-06	6.510019e-06	6.876945e-06	2.370024e-05	2.486122e-05	2.811956e-05	3.046393e-05	5.454302e-05	6.717682e-05	1.046872e-04	1.781797e-04	3.378487e-04	6.521821e-04	1.271009e-03	2.508998e-03	
GPU on rank 2 and GPU on rank 5:	2.105594e-06	2.094746e-06	2.165198e-06	2.170444e-06	2.173781e-06	2.224326e-06	2.539635e-06	2.578616e-06	2.763629e-06	3.176808e-06	6.484628e-06	6.747603e-06	2.369726e-05	2.467930e-05	2.637112e-05	3.050327e-05	6.355762e-05	6.696582e-05	1.042938e-04	1.781571e-04	3.355420e-04	6.512165e-04	1.267338e-03	2.507246e-03	
GPU on rank 2 and GPU on rank 6:	2.215624e-06	2.210855e-06	2.244711e-06	2.244115e-06	2.238393e-06	2.265930e-06	2.628326e-06	2.701759e-06	2.905130e-06	3.229737e-06	6.722212e-06	6.977677e-06	2.393162e-05	2.496135e-05	2.663875e-05	3.069401e-05	5.448580e-05	6.699800e-05	1.043367e-04	1.778328e-04	3.352022e-04	6.515265e-04	1.262701e-03	2.502584e-03	
GPU on rank 2 and GPU on rank 7:	2.171516e-06	2.166867e-06	2.219439e-06	2.231717e-06	2.238154e-06	2.295494e-06	2.564788e-06	2.625108e-06	2.836227e-06	3.206849e-06	6.633043e-06	7.082343e-06	2.390742e-05	2.494192e-05	2.669346e-05	3.096223e-05	5.481482e-05	6.742716e-05	1.044595e-04	1.780403e-04	3.355634e-04	6.532669e-04	1.264131e-03	2.504599e-03	
GPU on rank 3 and GPU on rank 4:	2.136230e-06	2.128839e-06	2.157450e-06	2.160311e-06	2.201796e-06	2.226233e-06	2.565742e-06	3.784418e-06	2.825856e-06	3.121018e-06	6.501079e-06	6.974459e-06	2.372789e-05	2.492404e-05	2.663183e-05	3.021121e-05	5.426288e-05	6.737947e-05	1.047325e-04	1.783502e-04	3.368926e-04	6.522536e-04	1.268578e-03	2.520120e-03	
GPU on rank 3 and GPU on rank 5:	2.087951e-06	2.101898e-06	2.133131e-06	2.116203e-06	2.130270e-06	2.188206e-06	2.539635e-06	2.587438e-06	2.829075e-06	3.115416e-06	6.412148e-06	6.732225e-06	2.369678e-05	2.468979e-05	2.636695e-05	3.028989e-05	5.435944e-05	6.705284e-05	1.045763e-04	1.782703e-04	3.372848e-04	6.538987e-04	1.267385e-03	2.501571e-03	
GPU on rank 3 and GPU on rank 6:	2.129793e-06	2.112269e-06	2.186894e-06	2.189517e-06	2.172589e-06	2.232790e-06	2.570391e-06	2.631426e-06	2.820134e-06	3.207564e-06	6.510258e-06	6.979108e-06	2.390969e-05	2.498507e-05	2.653801e-05	3.022194e-05	5.428791e-05	6.740212e-05	1.048589e-04	1.784301e-04	3.374183e-04	6.524920e-04	1.701057e-03	2.507448e-03	
GPU on rank 3 and GPU on rank 7:	2.093434e-06	2.133250e-06	2.166510e-06	2.171874e-06	2.173424e-06	2.223849e-06	2.538085e-06	2.622724e-06	2.718687e-06	3.212452e-06	6.222725e-06	6.903172e-06	2.383721e-05	2.493131e-05	2.642715e-05	3.068328e-05	5.470634e-05	6.774783e-05	1.043653e-04	1.780176e-04	3.358269e-04	6.519198e-04	1.266181e-03	2.509642e-03	


app 0: ./time_ping_pong_gpu 
rank: 0: { host: 1; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 1: { host: 1; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 2: { host: 1; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 3: { host: 1; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 4: { host: 2; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 5: { host: 2; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 6: { host: 2; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 7: { host: 2; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0

------------------------------------------------------------
Sender: LSF System <lsfadmin@lassen710>
Subject: Job 2422247: <ping_pong_gpu_mvapich> in cluster <lassen> Done

Job <ping_pong_gpu_mvapich> was submitted from host <lassen709> by user <locksl> in cluster <lassen> at Tue Apr 13 11:01:35 2021
Job was executed on host(s) <1*lassen710>, in queue <pdebug>, as user <locksl> in cluster <lassen> at Tue Apr 13 11:01:38 2021
                            <40*lassen28>
                            <40*lassen23>
</g/g16/locksl> was used as the home directory.
</g/g16/locksl/bin/bench_press_scripts> was used as the working directory.
Started at Tue Apr 13 11:01:38 2021
Terminated at Tue Apr 13 11:02:07 2021
Results reported at Tue Apr 13 11:02:07 2021

Your job looked like:

------------------------------------------------------------
# LSBATCH: User input
#!/bin/bash
#BSUB -J ping_pong_gpu_mvapich
#BSUB -e ping_pong_gpu_mvapich.%J.err
#BSUB -o ping_pong_gpu_mvapich.%J.out
#BSUB -nnodes 2
#BSUB -q pdebug
#BSUB -W 00:15

module load gcc
module load cuda
module load mvapich2

# Default paramter values for mvapich2
export MV2_USE_CUDA=1
export MV2_USE_GDR=1

# TESTING PARAMETER
#export MV2_CUDA_BLOCK_SIZE=131072
export MV2_CUDA_BLOCK_SIZE=262144
#export MV2_CUDA_BLOCK_SIZE=524288
#export MV2_CUDA_BLOCK_SIZE=786432
#export MV2_CUDA_BLOCK_SIZE=1048576
#export MV2_CUDA_BLOCK_SIZE=1310720

export MV2_GPUDIRECT_LIMIT=8192
export MV2_USE_GPUDIRECT_RECEIVE_LIMIT=131072
export MV2_CUDA_IPC_THRESHOLD=32768
#export MV2_CUDA_IPC_THRESHOLD=524288

# Parameters for tuning block size limit for gpu to cpu memory copies with gdr
export MV2_GDRCOPY_LIMIT=8192

# Parameter setting for Multi-IB and Multi-GPU node
#export MV2_PROCESS_TO_RAIL_MAPPING=BUNCH # not currently working with multiple resource set allocation

cd /g/g16/locksl/BenchPress/mvapich_build/examples

nvidia-cuda-mps-control -d

#jsrun -a4 -c4 -g4 -r1 -n2 -M "-gpu" --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./time_ping_pong_gpu
jsrun -a4 -c4 -g4 -r1 -n2 --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./time_ping_pong_gpu

echo quit | nvidia-cuda-mps-control



------------------------------------------------------------

Successfully completed.

Resource usage summary:

    CPU time :                                   0.24 sec.
    Max Memory :                                 -
    Average Memory :                             -
    Total Requested Memory :                     -
    Delta Memory :                               -
    Max Swap :                                   -
    Max Processes :                              -
    Max Threads :                                -
    Run time :                                   29 sec.
    Turnaround time :                            32 sec.

The output (if any) is above this job summary.



PS:

Read file <ping_pong_gpu_mvapich.2422247.err> for stderr output of this job.

