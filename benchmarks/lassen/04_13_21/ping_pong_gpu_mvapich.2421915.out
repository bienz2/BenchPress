Warning: Failed writing log files to directory [/var/log/nvidia-mps]. No logs will be available.
Profiling GPU Ping-Pongs
GPU on rank 0 and GPU on rank 1:	9.241104e-07	9.194613e-07	9.191036e-07	8.660555e-07	8.651018e-07	8.887053e-07	8.707047e-07	9.458065e-07	1.009107e-06	1.129746e-06	1.356006e-06	1.768827e-06	2.757490e-05	1.481199e-05	1.554215e-05	1.666069e-05	1.872540e-05	2.256274e-05	4.676700e-05	4.516840e-05	
GPU on rank 0 and GPU on rank 2:	1.061082e-06	1.065254e-06	1.062274e-06	9.732246e-07	9.894371e-07	1.012087e-06	1.060963e-06	1.227140e-06	1.438856e-06	1.750231e-06	2.125502e-06	2.969265e-06	2.839792e-05	1.556301e-05	1.633501e-05	1.813769e-05	2.116442e-05	2.743721e-05	4.054904e-05	6.550312e-05	
GPU on rank 0 and GPU on rank 3:	1.093268e-06	1.101494e-06	1.080394e-06	9.763241e-07	9.945631e-07	1.027703e-06	1.054525e-06	1.276374e-06	1.454115e-06	1.725316e-06	2.127647e-06	3.045797e-06	2.877367e-05	1.574838e-05	1.651955e-05	1.838326e-05	2.143860e-05	2.777338e-05	4.054427e-05	6.621003e-05	
GPU on rank 0 and GPU on rank 4:	2.061725e-06	3.178835e-06	2.123475e-06	2.136350e-06	2.122402e-06	2.150655e-06	2.375603e-06	2.469540e-06	2.555251e-06	3.107309e-06	6.367803e-06	6.936789e-06	2.352643e-05	2.683377e-05	2.788401e-05	3.158212e-05	5.620241e-05	7.380009e-05	1.092327e-04	1.515901e-04	
GPU on rank 0 and GPU on rank 5:	2.063274e-06	2.062798e-06	2.104640e-06	5.739808e-06	2.094865e-06	2.125382e-06	2.404451e-06	2.451897e-06	2.571583e-06	3.107309e-06	6.295681e-06	6.713867e-06	2.374423e-05	2.468431e-05	2.766299e-05	3.033400e-05	5.425930e-05	7.250309e-05	1.091814e-04	1.522481e-04	
GPU on rank 0 and GPU on rank 6:	2.169847e-06	2.159953e-06	2.188563e-06	2.189517e-06	2.188921e-06	2.224088e-06	2.538085e-06	2.596736e-06	2.766609e-06	3.155112e-06	6.521106e-06	6.701350e-06	2.426720e-05	2.529252e-05	2.710426e-05	3.072500e-05	5.483747e-05	7.306218e-05	1.095378e-04	1.517308e-04	
GPU on rank 0 and GPU on rank 7:	2.118349e-06	2.109289e-06	2.171516e-06	2.179980e-06	3.154755e-06	2.199531e-06	2.509475e-06	6.533384e-06	2.814531e-06	4.003763e-06	6.459594e-06	6.851077e-06	2.532077e-05	2.493834e-05	2.666247e-05	3.047228e-05	5.437613e-05	7.262826e-05	1.089990e-04	1.512778e-04	
GPU on rank 1 and GPU on rank 2:	1.043916e-06	1.045823e-06	1.026750e-06	9.566545e-07	9.694099e-07	1.007915e-06	1.035571e-06	1.260996e-06	1.398921e-06	1.681805e-06	2.027869e-06	2.831817e-06	2.892709e-05	1.594150e-05	1.665318e-05	1.826286e-05	2.146602e-05	2.807260e-05	4.081130e-05	6.644487e-05	
GPU on rank 1 and GPU on rank 3:	1.050711e-06	1.053333e-06	1.040697e-06	1.002550e-06	1.019597e-06	9.980202e-07	1.019120e-06	1.309991e-06	1.466155e-06	1.785994e-06	2.133250e-06	3.036857e-06	2.891409e-05	1.592195e-05	1.658690e-05	1.817346e-05	2.138138e-05	2.787232e-05	4.079461e-05	6.710291e-05	
GPU on rank 1 and GPU on rank 4:	2.044797e-06	2.043962e-06	2.104044e-06	2.106667e-06	2.125859e-06	2.146244e-06	2.423882e-06	3.489375e-06	2.508640e-06	3.084183e-06	6.218076e-06	6.848931e-06	2.322900e-05	2.424657e-05	2.593029e-05	2.969503e-05	5.378008e-05	7.208705e-05	1.088560e-04	1.515329e-04	
GPU on rank 1 and GPU on rank 5:	2.043486e-06	2.027988e-06	2.094746e-06	2.093673e-06	2.097130e-06	2.127051e-06	2.388835e-06	2.458215e-06	2.560377e-06	3.068924e-06	6.286263e-06	6.810784e-06	2.326536e-05	2.424729e-05	2.592134e-05	2.977014e-05	5.359054e-05	7.195234e-05	1.087081e-04	1.514840e-04	
GPU on rank 1 and GPU on rank 6:	2.138853e-06	2.128959e-06	2.156019e-06	2.161026e-06	2.159357e-06	2.315760e-06	2.573013e-06	2.608418e-06	2.799988e-06	3.181934e-06	6.417751e-06	6.680489e-06	2.398598e-05	2.495885e-05	2.730072e-05	3.021836e-05	5.438089e-05	7.270932e-05	1.092947e-04	1.515508e-04	
GPU on rank 1 and GPU on rank 7:	2.088547e-06	2.097487e-06	2.122641e-06	2.123594e-06	2.116799e-06	2.146840e-06	2.470016e-06	2.549171e-06	2.747536e-06	3.106952e-06	8.803606e-06	6.621599e-06	2.348661e-05	2.446222e-05	2.603269e-05	2.978921e-05	5.400419e-05	7.217646e-05	1.086617e-04	1.510739e-04	
GPU on rank 2 and GPU on rank 3:	7.523298e-07	7.233620e-07	7.493496e-07	7.972717e-07	7.488728e-07	7.581711e-07	7.853508e-07	7.699728e-07	8.200407e-07	8.717775e-07	9.860992e-07	1.297116e-06	2.741146e-05	1.490176e-05	1.545596e-05	1.663089e-05	1.871347e-05	2.264142e-05	3.031969e-05	4.537582e-05	
GPU on rank 2 and GPU on rank 4:	2.152562e-06	2.157807e-06	2.192974e-06	2.207160e-06	2.227664e-06	2.268314e-06	2.596378e-06	2.643108e-06	2.809644e-06	3.208995e-06	6.627917e-06	6.896138e-06	2.377605e-05	2.483106e-05	2.659833e-05	3.042221e-05	5.431414e-05	7.266521e-05	1.093268e-04	1.520944e-04	
GPU on rank 2 and GPU on rank 5:	2.133489e-06	2.133965e-06	2.171755e-06	2.198219e-06	2.216220e-06	2.253890e-06	2.565980e-06	2.634525e-06	2.780795e-06	3.199816e-06	6.596327e-06	6.833911e-06	2.392900e-05	3.352141e-05	2.671456e-05	3.036022e-05	5.417705e-05	7.244587e-05	1.088214e-04	1.514041e-04	
GPU on rank 2 and GPU on rank 6:	2.281666e-06	2.216339e-06	2.289414e-06	2.397180e-06	2.310395e-06	2.343774e-06	2.660155e-06	2.719402e-06	2.902031e-06	3.228784e-06	6.717682e-06	7.065892e-06	2.463257e-05	2.562463e-05	2.719438e-05	3.066063e-05	5.507469e-05	7.347107e-05	1.143134e-04	1.520562e-04	
GPU on rank 2 and GPU on rank 7:	2.162695e-06	2.149820e-06	2.199888e-06	2.200723e-06	2.209067e-06	2.262592e-06	2.589345e-06	2.692819e-06	2.821088e-06	3.248811e-06	6.424785e-06	6.951571e-06	2.405739e-05	2.511370e-05	2.667356e-05	3.028631e-05	5.438209e-05	7.264733e-05	1.094377e-04	1.521015e-04	
GPU on rank 3 and GPU on rank 4:	2.118230e-06	2.103209e-06	2.146840e-06	2.139211e-06	2.149463e-06	2.228022e-06	2.545834e-06	2.594829e-06	2.829075e-06	3.159881e-06	6.548882e-06	6.876945e-06	2.379787e-05	2.482367e-05	2.662802e-05	3.035188e-05	6.338477e-05	7.258654e-05	1.090002e-04	1.513338e-04	
GPU on rank 3 and GPU on rank 5:	2.084136e-06	2.092242e-06	2.132773e-06	2.153039e-06	2.165914e-06	2.258778e-06	2.541542e-06	2.606630e-06	2.811074e-06	3.114104e-06	6.535053e-06	6.806016e-06	2.378798e-05	2.478874e-05	2.660573e-05	3.011107e-05	5.434155e-05	7.268786e-05	1.093519e-04	1.516008e-04	
GPU on rank 3 and GPU on rank 6:	2.133250e-06	2.133965e-06	2.199292e-06	2.185345e-06	2.215505e-06	2.273560e-06	2.604365e-06	2.658486e-06	2.793312e-06	3.240347e-06	6.484509e-06	6.915808e-06	2.470863e-05	2.565122e-05	2.712166e-05	3.052235e-05	5.509615e-05	7.325768e-05	1.098680e-04	1.522720e-04	
GPU on rank 3 and GPU on rank 7:	2.089143e-06	2.080083e-06	2.125740e-06	2.130866e-06	2.125978e-06	2.294302e-06	2.498746e-06	2.555490e-06	2.666473e-06	3.173232e-06	6.248713e-06	6.892204e-06	2.397525e-05	2.489316e-05	2.648604e-05	3.009677e-05	5.436540e-05	7.259011e-05	1.090896e-04	1.606226e-04	


app 0: ./time_ping_pong_gpu 
rank: 0: { host: 1; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 1: { host: 1; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 2: { host: 1; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 3: { host: 1; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 4: { host: 2; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 5: { host: 2; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 6: { host: 2; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 7: { host: 2; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0

------------------------------------------------------------
Sender: LSF System <lsfadmin@lassen710>
Subject: Job 2421915: <ping_pong_gpu_mvapich> in cluster <lassen> Done

Job <ping_pong_gpu_mvapich> was submitted from host <lassen709> by user <locksl> in cluster <lassen> at Tue Apr 13 08:26:53 2021
Job was executed on host(s) <1*lassen710>, in queue <pdebug>, as user <locksl> in cluster <lassen> at Tue Apr 13 08:26:55 2021
                            <40*lassen32>
                            <40*lassen31>
</g/g16/locksl> was used as the home directory.
</g/g16/locksl/bin/bench_press_scripts> was used as the working directory.
Started at Tue Apr 13 08:26:55 2021
Terminated at Tue Apr 13 08:27:19 2021
Results reported at Tue Apr 13 08:27:19 2021

Your job looked like:

------------------------------------------------------------
# LSBATCH: User input
#!/bin/bash
#BSUB -J ping_pong_gpu_mvapich
#BSUB -e ping_pong_gpu_mvapich.%J.err
#BSUB -o ping_pong_gpu_mvapich.%J.out
#BSUB -nnodes 2
#BSUB -q pdebug
#BSUB -W 00:15

module load gcc
module load cuda
module load mvapich2

# Default paramter values for mvapich2
export MV2_USE_CUDA=1
export MV2_USE_GDR=1

# TESTING PARAMETER
#export MV2_CUDA_BLOCK_SIZE=262144
#export MV2_CUDA_BLOCK_SIZE=524288
#export MV2_CUDA_BLOCK_SIZE=786432
export MV2_CUDA_BLOCK_SIZE=1048576

export MV2_GPUDIRECT_LIMIT=8192
export MV2_USE_GPUDIRECT_RECEIVE_LIMIT=131072
export MV2_CUDA_IPC_THRESHOLD=32768
#export MV2_CUDA_IPC_THRESHOLD=524288

# Parameters for tuning block size limit for gpu to cpu memory copies with gdr
export MV2_GDRCOPY_LIMIT=8192

# Parameter setting for Multi-IB and Multi-GPU node
#export MV2_PROCESS_TO_RAIL_MAPPING=BUNCH # not currently working with multiple resource set allocation

cd /g/g16/locksl/BenchPress/mvapich_build/examples

nvidia-cuda-mps-control -d

#jsrun -a4 -c4 -g4 -r1 -n2 -M "-gpu" --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./time_ping_pong_gpu
jsrun -a4 -c4 -g4 -r1 -n2 --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./time_ping_pong_gpu

echo quit | nvidia-cuda-mps-control



------------------------------------------------------------

Successfully completed.

Resource usage summary:

    CPU time :                                   0.23 sec.
    Max Memory :                                 -
    Average Memory :                             -
    Total Requested Memory :                     -
    Delta Memory :                               -
    Max Swap :                                   -
    Max Processes :                              -
    Max Threads :                                -
    Run time :                                   24 sec.
    Turnaround time :                            26 sec.

The output (if any) is above this job summary.



PS:

Read file <ping_pong_gpu_mvapich.2421915.err> for stderr output of this job.

