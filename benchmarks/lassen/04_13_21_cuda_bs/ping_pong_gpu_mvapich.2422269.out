Warning: Failed writing log files to directory [/var/log/nvidia-mps]. No logs will be available.
Profiling GPU Ping-Pongs
GPU on rank 0 and GPU on rank 1:	6.918907e-07	7.266998e-07	7.215738e-07	7.777214e-07	8.023977e-07	7.961988e-07	8.069277e-07	8.287430e-07	8.678436e-07	9.063482e-07	1.057506e-06	1.305223e-06	2.893913e-05	1.553655e-05	1.601708e-05	1.729250e-05	1.932025e-05	2.322316e-05	3.074169e-05	5.404592e-05	7.605076e-05	1.372457e-04	2.578616e-04	4.991055e-04	
GPU on rank 0 and GPU on rank 2:	1.067519e-06	1.075625e-06	1.072168e-06	9.816885e-07	9.872913e-07	1.023769e-06	1.152873e-06	1.270294e-06	1.487494e-06	1.808405e-06	2.178669e-06	3.028274e-06	2.908242e-05	1.583362e-05	1.653457e-05	1.828074e-05	2.151012e-05	2.787352e-05	4.064202e-05	6.580234e-05	1.163375e-04	2.193213e-04	4.241586e-04	8.348703e-04	
GPU on rank 0 and GPU on rank 3:	1.101375e-06	1.091123e-06	1.090884e-06	9.948015e-07	1.010537e-06	1.042008e-06	1.143575e-06	1.324892e-06	1.511812e-06	1.749158e-06	2.172589e-06	3.005028e-06	2.963448e-05	1.609111e-05	1.691842e-05	1.849413e-05	2.178669e-05	2.803802e-05	4.100561e-05	6.649017e-05	1.179218e-04	2.209306e-04	4.261494e-04	8.353829e-04	
GPU on rank 0 and GPU on rank 4:	2.095580e-06	2.075195e-06	2.105594e-06	2.110839e-06	2.130747e-06	2.156138e-06	2.439499e-06	2.501011e-06	2.601385e-06	3.156900e-06	6.461143e-06	7.146239e-06	2.408481e-05	2.503216e-05	2.677464e-05	3.011823e-05	5.455136e-05	7.285953e-05	1.105142e-04	1.522791e-04	2.656889e-04	4.465222e-04	8.525729e-04	1.655149e-03	
GPU on rank 0 and GPU on rank 5:	2.117991e-06	2.120495e-06	2.169728e-06	2.196789e-06	2.182841e-06	2.208591e-06	2.859235e-06	2.563000e-06	2.651811e-06	7.276893e-06	6.435871e-06	7.037640e-06	2.415705e-05	2.529109e-05	2.703702e-05	3.037333e-05	5.469680e-05	7.299900e-05	1.096177e-04	1.521027e-04	2.445054e-04	4.469156e-04	8.516788e-04	1.653898e-03	
GPU on rank 0 and GPU on rank 6:	2.207756e-06	2.206802e-06	2.256274e-06	2.295852e-06	2.254725e-06	2.265096e-06	2.615213e-06	2.660990e-06	2.846956e-06	3.216267e-06	6.589293e-06	6.955028e-06	2.432847e-05	2.529848e-05	2.773702e-05	3.045559e-05	5.483270e-05	7.296562e-05	1.097012e-04	1.520836e-04	2.446485e-04	4.476905e-04	8.515596e-04	1.653790e-03	
GPU on rank 0 and GPU on rank 7:	2.210975e-06	2.197027e-06	2.237320e-06	2.246857e-06	2.253652e-06	2.299309e-06	2.628922e-06	2.663374e-06	2.911687e-06	3.159046e-06	6.577730e-06	6.955862e-06	2.434289e-05	2.535844e-05	2.715063e-05	3.055096e-05	5.509019e-05	7.312179e-05	1.095819e-04	1.519370e-04	2.446353e-04	4.474998e-04	8.524776e-04	1.654959e-03	
GPU on rank 1 and GPU on rank 2:	1.067638e-06	1.062155e-06	1.055002e-06	9.955168e-07	1.006246e-06	1.041532e-06	1.061082e-06	1.260161e-06	1.463413e-06	1.715064e-06	2.103329e-06	2.855897e-06	2.960753e-05	1.614368e-05	1.688516e-05	1.853466e-05	2.178192e-05	2.826691e-05	4.090190e-05	6.687045e-05	1.178646e-04	2.211094e-04	4.255891e-04	8.334637e-04	
GPU on rank 1 and GPU on rank 3:	1.069188e-06	1.071930e-06	1.076818e-06	1.013041e-06	1.007676e-06	1.022100e-06	1.085162e-06	1.316309e-06	1.479745e-06	1.773834e-06	2.188802e-06	3.021002e-06	2.972722e-05	1.619041e-05	1.687849e-05	1.842856e-05	2.164841e-05	2.832055e-05	4.111767e-05	6.726742e-05	1.194644e-04	2.227068e-04	4.276752e-04	8.352757e-04	
GPU on rank 1 and GPU on rank 4:	2.080679e-06	2.075672e-06	2.140641e-06	2.131701e-06	2.178788e-06	2.210259e-06	2.465129e-06	2.528071e-06	2.628684e-06	3.130436e-06	6.412268e-06	7.040501e-06	2.389681e-05	2.501881e-05	2.687716e-05	3.037810e-05	5.453706e-05	7.287860e-05	1.098859e-04	1.519346e-04	2.444983e-04	4.464865e-04	8.506417e-04	1.652908e-03	
GPU on rank 1 and GPU on rank 5:	2.096057e-06	2.078295e-06	2.939463e-06	2.122283e-06	2.135873e-06	2.175450e-06	2.485275e-06	2.538204e-06	2.645731e-06	3.164768e-06	9.237528e-06	6.989479e-06	2.416456e-05	2.514732e-05	2.699900e-05	3.050566e-05	5.468369e-05	7.316470e-05	1.101220e-04	1.530302e-04	2.449775e-04	4.466534e-04	8.507371e-04	1.652455e-03	
GPU on rank 1 and GPU on rank 6:	2.162099e-06	2.130508e-06	2.208829e-06	2.202392e-06	2.215505e-06	2.280951e-06	2.661586e-06	2.705932e-06	2.861977e-06	3.313541e-06	6.561637e-06	6.939411e-06	2.439415e-05	2.540326e-05	2.708328e-05	3.041387e-05	5.496740e-05	7.315636e-05	1.098979e-04	1.566756e-04	2.448165e-04	4.468083e-04	8.519173e-04	1.653075e-03	
GPU on rank 1 and GPU on rank 7:	2.143025e-06	2.132416e-06	2.207875e-06	2.227426e-06	2.239704e-06	2.291083e-06	2.635121e-06	2.685905e-06	2.945662e-06	3.189087e-06	6.542206e-06	6.886482e-06	2.454638e-05	2.541685e-05	2.832806e-05	3.042221e-05	5.509734e-05	7.340550e-05	1.101720e-04	1.528430e-04	2.450275e-04	4.475355e-04	8.517861e-04	1.653874e-03	
GPU on rank 2 and GPU on rank 3:	7.656813e-07	7.480383e-07	7.737875e-07	7.606745e-07	7.884502e-07	7.691383e-07	7.696152e-07	7.722378e-07	8.177757e-07	8.623600e-07	1.007795e-06	1.311183e-06	2.899456e-05	1.552880e-05	1.609504e-05	1.725912e-05	1.936316e-05	2.318859e-05	3.076673e-05	4.593015e-05	7.603884e-05	1.371980e-04	2.578259e-04	4.992843e-04	
GPU on rank 2 and GPU on rank 4:	2.174854e-06	2.154469e-06	2.196431e-06	2.197385e-06	6.208539e-06	2.267718e-06	2.625346e-06	2.656937e-06	2.810717e-06	3.245115e-06	6.603956e-06	6.936908e-06	2.429056e-05	2.547121e-05	2.710366e-05	3.045201e-05	5.508304e-05	7.330775e-05	1.101434e-04	1.526988e-04	2.444184e-04	4.469037e-04	8.510351e-04	1.653183e-03	
GPU on rank 2 and GPU on rank 5:	2.180815e-06	2.181172e-06	2.216458e-06	2.208948e-06	2.215981e-06	2.250910e-06	2.605319e-06	2.635956e-06	2.812862e-06	3.249884e-06	6.662250e-06	6.895065e-06	2.442694e-05	2.539182e-05	2.713466e-05	3.066063e-05	6.391048e-05	7.327199e-05	1.100874e-04	1.523387e-04	2.447915e-04	4.473567e-04	8.520842e-04	1.655197e-03	
GPU on rank 2 and GPU on rank 6:	2.273440e-06	2.274394e-06	2.326965e-06	2.312660e-06	2.322197e-06	2.353311e-06	2.670765e-06	2.731919e-06	2.944946e-06	3.271341e-06	6.734133e-06	7.138968e-06	2.456462e-05	2.558756e-05	2.720559e-05	3.055573e-05	5.501509e-05	7.315636e-05	1.097882e-04	1.522279e-04	2.446425e-04	4.475474e-04	8.519888e-04	1.652849e-03	
GPU on rank 2 and GPU on rank 7:	2.195358e-06	2.210617e-06	2.241731e-06	2.228379e-06	2.247334e-06	2.325296e-06	2.649069e-06	2.711296e-06	2.907276e-06	3.251910e-06	6.587625e-06	7.039785e-06	2.471840e-05	2.566874e-05	2.723885e-05	3.055573e-05	5.511045e-05	7.334113e-05	1.096928e-04	1.522386e-04	2.448070e-04	4.479408e-04	8.520246e-04	1.653862e-03	
GPU on rank 3 and GPU on rank 4:	2.136230e-06	2.135873e-06	2.170086e-06	2.170086e-06	2.207637e-06	2.239704e-06	2.571702e-06	3.845811e-06	2.822161e-06	3.168225e-06	6.588221e-06	6.942868e-06	2.426863e-05	2.540660e-05	2.703047e-05	3.075480e-05	5.518198e-05	7.339358e-05	1.100433e-04	1.521134e-04	2.447021e-04	4.472613e-04	8.530021e-04	1.654232e-03	
GPU on rank 3 and GPU on rank 5:	2.179861e-06	2.172232e-06	2.217889e-06	2.215862e-06	2.229691e-06	2.270699e-06	2.568364e-06	2.648115e-06	2.848387e-06	3.172755e-06	6.621122e-06	6.870985e-06	2.431989e-05	2.540624e-05	2.721298e-05	3.082752e-05	5.545735e-05	7.372856e-05	1.104558e-04	1.532698e-04	2.450502e-04	4.473805e-04	8.525014e-04	1.653707e-03	
GPU on rank 3 and GPU on rank 6:	2.225161e-06	2.209187e-06	2.255797e-06	2.268195e-06	2.272725e-06	2.320170e-06	2.662063e-06	2.745390e-06	2.877593e-06	3.323078e-06	6.562352e-06	7.098198e-06	2.458453e-05	2.556860e-05	2.717543e-05	3.081083e-05	5.532980e-05	7.363081e-05	1.102757e-04	1.526439e-04	2.450681e-04	4.475355e-04	8.520007e-04	1.654351e-03	
GPU on rank 3 and GPU on rank 7:	2.140403e-06	2.133131e-06	2.187729e-06	2.191186e-06	2.198815e-06	2.260804e-06	2.548337e-06	2.617359e-06	2.758622e-06	3.208041e-06	6.387591e-06	7.027149e-06	2.455807e-05	2.550304e-05	2.705777e-05	3.078580e-05	5.529046e-05	7.336140e-05	1.098359e-04	1.522338e-04	2.448463e-04	4.476666e-04	8.532286e-04	1.655185e-03	


app 0: ./time_ping_pong_gpu 
rank: 0: { host: 1; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 1: { host: 1; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 2: { host: 1; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 3: { host: 1; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 4: { host: 2; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 5: { host: 2; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 6: { host: 2; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 7: { host: 2; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0

------------------------------------------------------------
Sender: LSF System <lsfadmin@lassen710>
Subject: Job 2422269: <ping_pong_gpu_mvapich> in cluster <lassen> Done

Job <ping_pong_gpu_mvapich> was submitted from host <lassen709> by user <locksl> in cluster <lassen> at Tue Apr 13 11:17:09 2021
Job was executed on host(s) <1*lassen710>, in queue <pdebug>, as user <locksl> in cluster <lassen> at Tue Apr 13 11:17:11 2021
                            <40*lassen35>
                            <40*lassen32>
</g/g16/locksl> was used as the home directory.
</g/g16/locksl/bin/bench_press_scripts> was used as the working directory.
Started at Tue Apr 13 11:17:11 2021
Terminated at Tue Apr 13 11:18:12 2021
Results reported at Tue Apr 13 11:18:12 2021

Your job looked like:

------------------------------------------------------------
# LSBATCH: User input
#!/bin/bash
#BSUB -J ping_pong_gpu_mvapich
#BSUB -e ping_pong_gpu_mvapich.%J.err
#BSUB -o ping_pong_gpu_mvapich.%J.out
#BSUB -nnodes 2
#BSUB -q pdebug
#BSUB -W 00:15

module load gcc
module load cuda
module load mvapich2

# Default paramter values for mvapich2
export MV2_USE_CUDA=1
export MV2_USE_GDR=1

# TESTING PARAMETER
#export MV2_CUDA_BLOCK_SIZE=131072
#export MV2_CUDA_BLOCK_SIZE=262144
#export MV2_CUDA_BLOCK_SIZE=524288
#export MV2_CUDA_BLOCK_SIZE=786432
export MV2_CUDA_BLOCK_SIZE=1048576
#export MV2_CUDA_BLOCK_SIZE=1310720

export MV2_GPUDIRECT_LIMIT=8192
export MV2_USE_GPUDIRECT_RECEIVE_LIMIT=131072
export MV2_CUDA_IPC_THRESHOLD=32768
#export MV2_CUDA_IPC_THRESHOLD=524288

# Parameters for tuning block size limit for gpu to cpu memory copies with gdr
export MV2_GDRCOPY_LIMIT=8192

# Parameter setting for Multi-IB and Multi-GPU node
#export MV2_PROCESS_TO_RAIL_MAPPING=BUNCH # not currently working with multiple resource set allocation

cd /g/g16/locksl/BenchPress/mvapich_build/examples

nvidia-cuda-mps-control -d

#jsrun -a4 -c4 -g4 -r1 -n2 -M "-gpu" --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./time_ping_pong_gpu
jsrun -a4 -c4 -g4 -r1 -n2 --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./time_ping_pong_gpu

echo quit | nvidia-cuda-mps-control



------------------------------------------------------------

Successfully completed.

Resource usage summary:

    CPU time :                                   0.16 sec.
    Max Memory :                                 59 MB
    Average Memory :                             52.57 MB
    Total Requested Memory :                     -
    Delta Memory :                               -
    Max Swap :                                   1425 MB
    Max Processes :                              4
    Max Threads :                                27
    Run time :                                   61 sec.
    Turnaround time :                            63 sec.

The output (if any) is above this job summary.



PS:

Read file <ping_pong_gpu_mvapich.2422269.err> for stderr output of this job.

