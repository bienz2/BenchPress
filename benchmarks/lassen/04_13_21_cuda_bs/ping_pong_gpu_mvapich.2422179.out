Warning: Failed writing log files to directory [/var/log/nvidia-mps]. No logs will be available.
Profiling GPU Ping-Pongs
GPU on rank 0 and GPU on rank 1:	9.063482e-07	8.696318e-07	8.593798e-07	7.606745e-07	7.765293e-07	7.902384e-07	8.504391e-07	9.003878e-07	9.784698e-07	1.099229e-06	1.308799e-06	1.770377e-06	2.665436e-05	1.465857e-05	1.520789e-05	1.641870e-05	1.856446e-05	2.235770e-05	2.992272e-05	4.500389e-05	7.514834e-05	1.364470e-04	2.570033e-04	4.981995e-04	
GPU on rank 0 and GPU on rank 2:	1.026750e-06	1.026034e-06	1.029730e-06	9.499788e-07	9.529591e-07	9.816885e-07	1.040459e-06	1.309395e-06	1.452565e-06	1.719952e-06	2.117634e-06	2.989411e-06	2.945864e-05	1.563728e-05	1.711535e-05	1.876116e-05	2.204657e-05	2.816081e-05	4.070163e-05	6.553292e-05	1.159978e-04	2.191424e-04	4.246116e-04	8.333683e-04	
GPU on rank 0 and GPU on rank 3:	1.096487e-06	1.083493e-06	1.069427e-06	1.017451e-06	9.968281e-07	1.021504e-06	1.112342e-06	1.223922e-06	1.443863e-06	1.682997e-06	2.111554e-06	2.918601e-06	2.861309e-05	1.569438e-05	1.637626e-05	1.803398e-05	2.111197e-05	2.755880e-05	4.051685e-05	6.601453e-05	1.175296e-04	2.205014e-04	4.248381e-04	8.334279e-04	
GPU on rank 0 and GPU on rank 4:	4.679441e-06	2.082825e-06	2.080798e-06	2.112746e-06	2.107143e-06	2.140999e-06	2.397537e-06	2.458453e-06	2.540588e-06	3.061175e-06	6.415606e-06	6.782889e-06	2.284324e-05	2.390444e-05	2.575350e-05	2.977252e-05	5.642891e-05	8.972526e-05	1.571620e-04	3.174078e-04	5.753791e-04	1.130128e-03	2.310848e-03	4.685593e-03	
GPU on rank 0 and GPU on rank 5:	2.102137e-06	2.071023e-06	2.113819e-06	2.125978e-06	2.239585e-06	2.163529e-06	2.444863e-06	2.507806e-06	2.611279e-06	3.116012e-06	6.290436e-06	6.862998e-06	2.313328e-05	2.416241e-05	2.580607e-05	2.962947e-05	5.677223e-05	9.031773e-05	1.575696e-04	2.975380e-04	5.852377e-04	1.144683e-03	2.327383e-03	4.686415e-03	
GPU on rank 0 and GPU on rank 6:	2.191305e-06	2.185941e-06	2.212286e-06	2.210259e-06	5.892277e-06	2.223372e-06	2.589345e-06	2.623916e-06	2.784729e-06	3.208041e-06	6.561160e-06	6.951571e-06	2.500808e-05	2.430904e-05	2.594614e-05	3.107309e-05	6.030560e-05	9.173751e-05	1.614821e-04	3.003728e-04	5.807674e-04	1.145601e-03	2.335668e-03	4.703963e-03	
GPU on rank 0 and GPU on rank 7:	2.160907e-06	2.161741e-06	2.191782e-06	2.190828e-06	2.215743e-06	2.215624e-06	2.572417e-06	2.613306e-06	2.821922e-06	3.095031e-06	6.506324e-06	7.074237e-06	2.380943e-05	2.443349e-05	2.605093e-05	3.034592e-05	5.716562e-05	9.135723e-05	1.593685e-04	2.996182e-04	5.820811e-04	1.427865e-03	2.334368e-03	4.694462e-03	
GPU on rank 1 and GPU on rank 2:	1.042962e-06	1.039863e-06	1.042366e-06	9.808540e-07	9.783506e-07	1.031041e-06	1.069665e-06	1.201630e-06	1.440167e-06	1.686931e-06	2.063870e-06	2.906799e-06	2.935779e-05	1.599586e-05	1.671815e-05	1.847506e-05	2.162099e-05	2.798676e-05	4.080057e-05	6.647587e-05	1.176846e-04	2.209544e-04	4.258633e-04	8.358955e-04	
GPU on rank 1 and GPU on rank 3:	1.037955e-06	1.047850e-06	1.048565e-06	9.903908e-07	9.746552e-07	9.862185e-07	1.080751e-06	1.340985e-06	1.461267e-06	1.731277e-06	2.138138e-06	3.047466e-06	2.909827e-05	1.602423e-05	1.671147e-05	1.819253e-05	2.152324e-05	2.796650e-05	4.094362e-05	6.712198e-05	1.187241e-04	2.230167e-04	4.274607e-04	8.343577e-04	
GPU on rank 1 and GPU on rank 4:	2.017260e-06	2.008677e-06	2.105474e-06	2.122283e-06	2.128482e-06	2.160788e-06	2.408266e-06	2.445221e-06	2.581000e-06	3.075838e-06	6.365061e-06	6.860018e-06	2.319610e-05	2.419806e-05	2.590692e-05	2.995729e-05	5.704999e-05	9.088635e-05	1.583385e-04	2.984965e-04	5.784452e-04	1.139677e-03	2.318621e-03	4.672980e-03	
GPU on rank 1 and GPU on rank 5:	2.061725e-06	2.063155e-06	2.098441e-06	2.105713e-06	2.106786e-06	2.131939e-06	2.419829e-06	2.469540e-06	2.572894e-06	3.091574e-06	9.042859e-06	7.067919e-06	2.333319e-05	2.420652e-05	2.720296e-05	2.980232e-05	5.704761e-05	9.113669e-05	1.578617e-04	2.985573e-04	5.782294e-04	1.140785e-03	2.324343e-03	4.682326e-03	
GPU on rank 1 and GPU on rank 6:	2.097368e-06	2.090335e-06	2.151966e-06	2.133608e-06	2.166510e-06	2.220631e-06	2.538085e-06	2.612352e-06	2.764225e-06	3.174067e-06	6.686330e-06	7.015944e-06	2.357113e-05	2.440548e-05	2.602804e-05	2.981901e-05	5.710483e-05	9.140849e-05	1.590514e-04	2.995849e-04	5.808794e-04	1.150393e-03	2.334523e-03	4.703283e-03	
GPU on rank 1 and GPU on rank 7:	2.112985e-06	2.111912e-06	2.166390e-06	2.154827e-06	2.162695e-06	2.201080e-06	2.543807e-06	2.560616e-06	2.811909e-06	3.094554e-06	6.602883e-06	7.128000e-06	2.351248e-05	2.444839e-05	2.622771e-05	3.040671e-05	5.712271e-05	1.075578e-04	1.594210e-04	3.002608e-04	5.815864e-04	1.146507e-03	2.336526e-03	4.706526e-03	
GPU on rank 2 and GPU on rank 3:	7.339716e-07	7.218122e-07	7.357597e-07	7.319450e-07	7.288456e-07	7.199049e-07	7.314682e-07	7.599592e-07	7.948875e-07	8.543730e-07	1.006961e-06	1.326323e-06	2.728331e-05	1.490998e-05	1.541281e-05	1.668692e-05	1.872659e-05	2.251744e-05	3.005028e-05	4.519701e-05	7.524967e-05	1.361966e-04	2.562165e-04	4.961371e-04	
GPU on rank 2 and GPU on rank 4:	2.153158e-06	2.173662e-06	2.233386e-06	2.341509e-06	2.215266e-06	2.228856e-06	2.579331e-06	2.741575e-06	2.784610e-06	3.189683e-06	6.715298e-06	6.983161e-06	2.371418e-05	2.477074e-05	2.654469e-05	3.061771e-05	5.794406e-05	9.265542e-05	1.616395e-04	3.033435e-04	5.874193e-04	1.156151e-03	2.362859e-03	4.762006e-03	
GPU on rank 2 and GPU on rank 5:	2.168536e-06	2.166510e-06	2.214193e-06	2.225637e-06	2.231121e-06	2.263784e-06	2.595901e-06	2.644420e-06	2.790570e-06	3.299236e-06	6.721020e-06	7.061958e-06	2.402544e-05	2.489209e-05	2.669871e-05	3.068447e-05	7.743359e-05	9.296060e-05	1.615846e-04	3.035021e-04	6.135869e-04	1.158476e-03	2.372837e-03	4.771876e-03	
GPU on rank 2 and GPU on rank 6:	2.242565e-06	2.245784e-06	2.276421e-06	2.294183e-06	2.290010e-06	2.318025e-06	2.690077e-06	2.717376e-06	2.959251e-06	3.267407e-06	6.903768e-06	7.287860e-06	2.419317e-05	2.499020e-05	2.666545e-05	3.068805e-05	5.828023e-05	9.330511e-05	1.620185e-04	3.046846e-04	5.895555e-04	1.160407e-03	2.374327e-03	4.788160e-03	
GPU on rank 2 and GPU on rank 7:	2.195477e-06	2.171040e-06	2.268791e-06	2.253175e-06	2.276182e-06	2.327800e-06	2.671719e-06	2.703309e-06	2.902627e-06	3.263354e-06	6.753325e-06	7.260442e-06	2.417386e-05	2.515626e-05	2.698088e-05	3.107548e-05	5.855560e-05	9.333730e-05	1.617599e-04	3.050601e-04	5.903924e-04	1.163805e-03	2.380288e-03	4.908729e-03	
GPU on rank 3 and GPU on rank 4:	2.164245e-06	2.146244e-06	2.176642e-06	2.174377e-06	2.177119e-06	2.236366e-06	2.542019e-06	3.790498e-06	2.810836e-06	3.123999e-06	6.616712e-06	7.040381e-06	2.365160e-05	2.476335e-05	2.651882e-05	3.148913e-05	5.812287e-05	9.304523e-05	1.619959e-04	3.046584e-04	5.898678e-04	1.161194e-03	2.364051e-03	4.772842e-03	
GPU on rank 3 and GPU on rank 5:	2.166152e-06	2.154589e-06	2.202272e-06	2.213717e-06	2.216578e-06	2.259612e-06	2.571940e-06	2.619863e-06	2.845883e-06	3.155828e-06	6.708145e-06	7.064581e-06	2.386570e-05	2.487087e-05	2.660799e-05	3.024340e-05	5.843401e-05	9.361863e-05	1.618516e-04	3.039992e-04	5.902863e-04	1.163650e-03	2.372944e-03	4.789972e-03	
GPU on rank 3 and GPU on rank 6:	2.196670e-06	2.191067e-06	2.263188e-06	2.240062e-06	2.258897e-06	2.306223e-06	2.630472e-06	2.675772e-06	2.843499e-06	3.220320e-06	6.776810e-06	7.302403e-06	2.408051e-05	2.506697e-05	2.664208e-05	3.026843e-05	5.836129e-05	9.346604e-05	1.623559e-04	3.058970e-04	5.937922e-04	1.166308e-03	2.382743e-03	4.800355e-03	
GPU on rank 3 and GPU on rank 7:	2.151370e-06	2.141237e-06	2.197623e-06	2.197623e-06	2.218127e-06	2.284050e-06	2.562046e-06	2.608657e-06	2.770543e-06	3.232241e-06	6.699085e-06	7.461429e-06	2.446091e-05	2.542853e-05	2.706909e-05	3.086925e-05	5.950809e-05	9.530902e-05	1.654017e-04	3.121006e-04	6.064236e-04	1.194787e-03	2.438533e-03	4.939616e-03	


app 0: ./time_ping_pong_gpu 
rank: 0: { host: 1; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 1: { host: 1; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 2: { host: 1; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 3: { host: 1; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 4: { host: 2; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 5: { host: 2; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 6: { host: 2; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 7: { host: 2; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0

------------------------------------------------------------
Sender: LSF System <lsfadmin@lassen710>
Subject: Job 2422179: <ping_pong_gpu_mvapich> in cluster <lassen> Done

Job <ping_pong_gpu_mvapich> was submitted from host <lassen709> by user <locksl> in cluster <lassen> at Tue Apr 13 10:16:32 2021
Job was executed on host(s) <1*lassen710>, in queue <pdebug>, as user <locksl> in cluster <lassen> at Tue Apr 13 10:16:34 2021
                            <40*lassen35>
                            <40*lassen31>
</g/g16/locksl> was used as the home directory.
</g/g16/locksl/bin/bench_press_scripts> was used as the working directory.
Started at Tue Apr 13 10:16:34 2021
Terminated at Tue Apr 13 10:17:09 2021
Results reported at Tue Apr 13 10:17:09 2021

Your job looked like:

------------------------------------------------------------
# LSBATCH: User input
#!/bin/bash
#BSUB -J ping_pong_gpu_mvapich
#BSUB -e ping_pong_gpu_mvapich.%J.err
#BSUB -o ping_pong_gpu_mvapich.%J.out
#BSUB -nnodes 2
#BSUB -q pdebug
#BSUB -W 00:15

module load gcc
module load cuda
module load mvapich2

# Default paramter values for mvapich2
export MV2_USE_CUDA=1
export MV2_USE_GDR=1

# TESTING PARAMETER
export MV2_CUDA_BLOCK_SIZE=131072
#export MV2_CUDA_BLOCK_SIZE=262144
#export MV2_CUDA_BLOCK_SIZE=524288
#export MV2_CUDA_BLOCK_SIZE=786432
#export MV2_CUDA_BLOCK_SIZE=1048576
#export MV2_CUDA_BLOCK_SIZE=1310720

export MV2_GPUDIRECT_LIMIT=8192
export MV2_USE_GPUDIRECT_RECEIVE_LIMIT=131072
export MV2_CUDA_IPC_THRESHOLD=32768
#export MV2_CUDA_IPC_THRESHOLD=524288

# Parameters for tuning block size limit for gpu to cpu memory copies with gdr
export MV2_GDRCOPY_LIMIT=8192

# Parameter setting for Multi-IB and Multi-GPU node
#export MV2_PROCESS_TO_RAIL_MAPPING=BUNCH # not currently working with multiple resource set allocation

cd /g/g16/locksl/BenchPress/mvapich_build/examples

nvidia-cuda-mps-control -d

#jsrun -a4 -c4 -g4 -r1 -n2 -M "-gpu" --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./time_ping_pong_gpu
jsrun -a4 -c4 -g4 -r1 -n2 --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./time_ping_pong_gpu

echo quit | nvidia-cuda-mps-control



------------------------------------------------------------

Successfully completed.

Resource usage summary:

    CPU time :                                   0.20 sec.
    Max Memory :                                 -
    Average Memory :                             -
    Total Requested Memory :                     -
    Delta Memory :                               -
    Max Swap :                                   -
    Max Processes :                              -
    Max Threads :                                -
    Run time :                                   35 sec.
    Turnaround time :                            37 sec.

The output (if any) is above this job summary.



PS:

Read file <ping_pong_gpu_mvapich.2422179.err> for stderr output of this job.

