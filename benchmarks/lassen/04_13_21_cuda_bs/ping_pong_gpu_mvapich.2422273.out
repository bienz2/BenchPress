Warning: Failed writing log files to directory [/var/log/nvidia-mps]. No logs will be available.
Profiling GPU Ping-Pongs
GPU on rank 0 and GPU on rank 1:	6.902218e-07	6.792545e-07	7.218122e-07	7.992983e-07	7.892847e-07	7.876158e-07	7.705688e-07	8.172989e-07	8.274317e-07	8.922815e-07	1.046658e-06	1.296997e-06	2.745008e-05	1.522028e-05	1.546645e-05	1.679063e-05	1.878500e-05	2.267599e-05	3.018618e-05	5.458117e-05	7.540703e-05	1.367569e-04	2.573609e-04	4.985571e-04	
GPU on rank 0 and GPU on rank 2:	1.069665e-06	1.069188e-06	1.077175e-06	9.825230e-07	9.849072e-07	1.027703e-06	1.706243e-06	1.306772e-06	1.502037e-06	1.809716e-06	2.198458e-06	3.010869e-06	2.928019e-05	1.576090e-05	1.647413e-05	1.818299e-05	2.137661e-05	2.755046e-05	4.068375e-05	6.556273e-05	1.245177e-04	2.187371e-04	4.249334e-04	8.344412e-04	
GPU on rank 0 and GPU on rank 3:	1.094460e-06	4.114985e-06	4.356861e-06	1.015067e-06	1.021862e-06	1.061678e-06	1.086473e-06	1.359582e-06	1.506805e-06	1.722574e-06	2.172947e-06	3.018618e-06	2.969790e-05	1.605439e-05	1.795864e-05	1.855135e-05	2.153158e-05	2.811909e-05	4.099846e-05	6.648898e-05	1.178670e-04	2.216816e-04	4.253864e-04	8.340120e-04	
GPU on rank 0 and GPU on rank 4:	2.108216e-06	2.101779e-06	2.113700e-06	2.117395e-06	2.132297e-06	2.171516e-06	2.458692e-06	2.511144e-06	2.605438e-06	3.135800e-06	6.411791e-06	7.033348e-06	2.345479e-05	2.451348e-05	2.626109e-05	3.006816e-05	5.380154e-05	7.183909e-05	1.084840e-04	1.513290e-04	2.443802e-04	4.301190e-04	8.243322e-04	1.602972e-03	
GPU on rank 0 and GPU on rank 5:	2.109647e-06	2.082467e-06	2.131939e-06	2.137661e-06	2.146721e-06	2.185702e-06	2.480149e-06	2.538204e-06	2.621055e-06	3.141642e-06	6.464124e-06	7.124901e-06	2.369571e-05	2.476728e-05	2.666593e-05	3.000021e-05	5.378962e-05	7.201791e-05	1.083243e-04	1.509500e-04	2.443981e-04	4.298449e-04	1.346135e-03	1.602423e-03	
GPU on rank 0 and GPU on rank 6:	2.199173e-06	2.208948e-06	2.258778e-06	3.026724e-06	2.279878e-06	2.313375e-06	2.646804e-06	2.691388e-06	2.847075e-06	3.292203e-06	6.666183e-06	7.029533e-06	2.390194e-05	2.495325e-05	2.656543e-05	3.028393e-05	5.442381e-05	7.254601e-05	1.091874e-04	1.516390e-04	2.481568e-04	4.313111e-04	8.274674e-04	1.604819e-03	
GPU on rank 0 and GPU on rank 7:	2.153277e-06	2.128243e-06	2.207518e-06	2.199292e-06	2.210498e-06	2.270579e-06	2.649903e-06	2.656341e-06	2.909184e-06	3.164172e-06	6.557584e-06	6.986499e-06	2.392352e-05	2.493191e-05	2.668417e-05	3.030658e-05	5.423427e-05	7.240772e-05	1.090586e-04	1.513648e-04	2.448869e-04	4.307628e-04	8.255720e-04	1.603663e-03	
GPU on rank 1 and GPU on rank 2:	1.080155e-06	1.070380e-06	1.057625e-06	9.865761e-07	9.944439e-07	1.027822e-06	1.037002e-06	1.164079e-06	1.329660e-06	1.659632e-06	2.054811e-06	2.855182e-06	2.958477e-05	1.608050e-05	1.773787e-05	1.855969e-05	2.162814e-05	2.809167e-05	4.090548e-05	6.659865e-05	1.254284e-04	2.215862e-04	4.259467e-04	8.345723e-04	
GPU on rank 1 and GPU on rank 3:	1.104116e-06	1.099825e-06	1.091599e-06	1.036882e-06	1.012325e-06	1.030564e-06	1.054645e-06	1.291156e-06	1.456141e-06	1.707792e-06	2.179265e-06	3.109813e-06	2.972734e-05	1.615274e-05	1.685524e-05	1.840591e-05	2.164364e-05	2.825618e-05	4.102826e-05	6.711483e-05	1.192629e-04	2.226353e-04	4.274607e-04	8.360386e-04	
GPU on rank 1 and GPU on rank 4:	2.115130e-06	2.081037e-06	2.108693e-06	2.103686e-06	2.112269e-06	2.144456e-06	2.488494e-06	2.543807e-06	2.646327e-06	3.125548e-06	6.363392e-06	6.975055e-06	2.363861e-05	2.484870e-05	2.644432e-05	3.010511e-05	5.467534e-05	7.249355e-05	1.093817e-04	1.522994e-04	2.456474e-04	4.304647e-04	8.254409e-04	1.602924e-03	
GPU on rank 1 and GPU on rank 5:	2.104640e-06	2.092719e-06	2.120495e-06	2.197504e-06	2.138019e-06	2.170444e-06	2.476215e-06	2.520204e-06	2.651453e-06	3.131866e-06	9.119391e-06	7.122755e-06	2.379310e-05	2.482998e-05	2.665901e-05	2.991796e-05	5.437851e-05	7.283449e-05	1.092815e-04	1.526403e-04	2.455771e-04	4.299879e-04	8.240938e-04	1.602495e-03	
GPU on rank 1 and GPU on rank 6:	2.191901e-06	2.195716e-06	2.246976e-06	2.244592e-06	2.263069e-06	2.288222e-06	2.596498e-06	2.641201e-06	2.822042e-06	3.253937e-06	6.613255e-06	6.959200e-06	2.400792e-05	2.497363e-05	2.664077e-05	3.007054e-05	5.450606e-05	7.257462e-05	1.092231e-04	1.516092e-04	2.451622e-04	4.301429e-04	8.253455e-04	1.603734e-03	
GPU on rank 1 and GPU on rank 7:	2.147794e-06	2.158523e-06	2.214313e-06	2.206683e-06	2.216101e-06	2.287984e-06	2.591848e-06	2.623320e-06	2.874374e-06	3.143072e-06	6.522894e-06	6.865025e-06	2.400172e-05	2.499437e-05	2.675080e-05	3.024459e-05	5.445004e-05	7.275105e-05	1.092649e-04	1.517618e-04	2.487922e-04	4.304528e-04	8.249044e-04	1.602614e-03	
GPU on rank 2 and GPU on rank 3:	7.607937e-07	7.460117e-07	7.706881e-07	8.089542e-07	8.133650e-07	7.580519e-07	7.523298e-07	7.792711e-07	8.362532e-07	8.699894e-07	1.031041e-06	1.315475e-06	2.902710e-05	1.557279e-05	1.612663e-05	1.740694e-05	1.934171e-05	2.322912e-05	3.090978e-05	4.592061e-05	7.615566e-05	1.372814e-04	2.578616e-04	4.991412e-04	
GPU on rank 2 and GPU on rank 4:	2.140522e-06	2.143621e-06	2.187252e-06	2.188325e-06	2.209902e-06	2.269387e-06	2.591491e-06	2.635956e-06	2.794147e-06	3.216267e-06	6.605148e-06	6.820083e-06	2.425230e-05	2.535021e-05	2.719724e-05	3.049731e-05	5.496740e-05	7.324815e-05	1.097667e-04	1.520967e-04	2.466750e-04	4.335642e-04	8.286357e-04	1.606750e-03	
GPU on rank 2 and GPU on rank 5:	2.138019e-06	2.155542e-06	2.223015e-06	2.208352e-06	2.219677e-06	2.257228e-06	2.594829e-06	2.648354e-06	2.807736e-06	3.224492e-06	6.672382e-06	6.972909e-06	2.439559e-05	2.546942e-05	2.727127e-05	3.040314e-05	6.389856e-05	7.313728e-05	1.096725e-04	1.519775e-04	2.469218e-04	4.331470e-04	8.285284e-04	1.606297e-03	
GPU on rank 2 and GPU on rank 6:	2.262473e-06	2.271771e-06	2.299309e-06	2.304196e-06	2.310038e-06	2.344608e-06	2.710462e-06	2.741337e-06	2.967954e-06	3.305554e-06	6.778121e-06	7.065415e-06	2.456951e-05	2.565968e-05	2.727890e-05	3.066063e-05	5.508780e-05	7.319689e-05	1.098537e-04	1.520598e-04	2.471602e-04	4.336238e-04	8.288741e-04	1.607728e-03	
GPU on rank 2 and GPU on rank 7:	2.183914e-06	2.206922e-06	2.256036e-06	2.254725e-06	2.266049e-06	2.319813e-06	2.630234e-06	2.697945e-06	2.886295e-06	3.242373e-06	6.530285e-06	7.109284e-06	2.469504e-05	2.575421e-05	2.744699e-05	3.059268e-05	5.492210e-05	7.327199e-05	1.096714e-04	1.519692e-04	2.465951e-04	4.332304e-04	8.282065e-04	1.608217e-03	
GPU on rank 3 and GPU on rank 4:	2.178431e-06	2.156138e-06	2.187610e-06	2.178788e-06	2.185464e-06	2.241611e-06	2.539515e-06	3.826380e-06	2.821088e-06	3.152370e-06	6.506801e-06	6.886363e-06	2.436817e-05	2.544999e-05	2.731907e-05	3.063083e-05	5.480409e-05	7.305741e-05	1.129019e-04	1.519716e-04	2.470267e-04	4.338384e-04	8.293867e-04	1.608741e-03	
GPU on rank 3 and GPU on rank 5:	2.157807e-06	2.165914e-06	2.294898e-06	2.220511e-06	2.228260e-06	2.270818e-06	2.575517e-06	2.667785e-06	2.839208e-06	3.155112e-06	6.542325e-06	6.929636e-06	2.441680e-05	2.553082e-05	2.736855e-05	3.051281e-05	5.480289e-05	7.310867e-05	1.098621e-04	1.524520e-04	2.471614e-04	4.344344e-04	8.299112e-04	1.607847e-03	
GPU on rank 3 and GPU on rank 6:	2.181053e-06	2.180576e-06	2.218485e-06	2.214313e-06	2.226114e-06	2.283216e-06	2.604246e-06	2.694607e-06	2.820611e-06	3.264070e-06	6.583452e-06	6.959915e-06	2.469325e-05	2.577066e-05	2.735877e-05	3.050566e-05	5.474687e-05	7.306457e-05	1.095104e-04	1.519716e-04	2.469409e-04	4.334211e-04	8.287311e-04	1.612675e-03	
GPU on rank 3 and GPU on rank 7:	2.111435e-06	2.115130e-06	2.147198e-06	2.177835e-06	2.164364e-06	2.238989e-06	2.498388e-06	2.583385e-06	2.726674e-06	3.208160e-06	6.375313e-06	6.985784e-06	2.471328e-05	2.577090e-05	2.742887e-05	3.061295e-05	5.483627e-05	7.302642e-05	1.096106e-04	1.519585e-04	2.468204e-04	4.329085e-04	8.295894e-04	1.606417e-03	


app 0: ./time_ping_pong_gpu 
rank: 0: { host: 1; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 1: { host: 1; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 2: { host: 1; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 3: { host: 1; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 4: { host: 2; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 5: { host: 2; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 6: { host: 2; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 7: { host: 2; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0

------------------------------------------------------------
Sender: LSF System <lsfadmin@lassen710>
Subject: Job 2422273: <ping_pong_gpu_mvapich> in cluster <lassen> Done

Job <ping_pong_gpu_mvapich> was submitted from host <lassen709> by user <locksl> in cluster <lassen> at Tue Apr 13 11:20:02 2021
Job was executed on host(s) <1*lassen710>, in queue <pdebug>, as user <locksl> in cluster <lassen> at Tue Apr 13 11:20:05 2021
                            <40*lassen35>
                            <40*lassen32>
</g/g16/locksl> was used as the home directory.
</g/g16/locksl/bin/bench_press_scripts> was used as the working directory.
Started at Tue Apr 13 11:20:05 2021
Terminated at Tue Apr 13 11:20:33 2021
Results reported at Tue Apr 13 11:20:33 2021

Your job looked like:

------------------------------------------------------------
# LSBATCH: User input
#!/bin/bash
#BSUB -J ping_pong_gpu_mvapich
#BSUB -e ping_pong_gpu_mvapich.%J.err
#BSUB -o ping_pong_gpu_mvapich.%J.out
#BSUB -nnodes 2
#BSUB -q pdebug
#BSUB -W 00:15

module load gcc
module load cuda
module load mvapich2

# Default paramter values for mvapich2
export MV2_USE_CUDA=1
export MV2_USE_GDR=1

# TESTING PARAMETER
#export MV2_CUDA_BLOCK_SIZE=131072
#export MV2_CUDA_BLOCK_SIZE=262144
#export MV2_CUDA_BLOCK_SIZE=524288
#export MV2_CUDA_BLOCK_SIZE=786432
#export MV2_CUDA_BLOCK_SIZE=1048576
export MV2_CUDA_BLOCK_SIZE=1310720

export MV2_GPUDIRECT_LIMIT=8192
export MV2_USE_GPUDIRECT_RECEIVE_LIMIT=131072
export MV2_CUDA_IPC_THRESHOLD=32768
#export MV2_CUDA_IPC_THRESHOLD=524288

# Parameters for tuning block size limit for gpu to cpu memory copies with gdr
export MV2_GDRCOPY_LIMIT=8192

# Parameter setting for Multi-IB and Multi-GPU node
#export MV2_PROCESS_TO_RAIL_MAPPING=BUNCH # not currently working with multiple resource set allocation

cd /g/g16/locksl/BenchPress/mvapich_build/examples

nvidia-cuda-mps-control -d

#jsrun -a4 -c4 -g4 -r1 -n2 -M "-gpu" --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./time_ping_pong_gpu
jsrun -a4 -c4 -g4 -r1 -n2 --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./time_ping_pong_gpu

echo quit | nvidia-cuda-mps-control



------------------------------------------------------------

Successfully completed.

Resource usage summary:

    CPU time :                                   0.21 sec.
    Max Memory :                                 -
    Average Memory :                             -
    Total Requested Memory :                     -
    Delta Memory :                               -
    Max Swap :                                   -
    Max Processes :                              -
    Max Threads :                                -
    Run time :                                   28 sec.
    Turnaround time :                            31 sec.

The output (if any) is above this job summary.



PS:

Read file <ping_pong_gpu_mvapich.2422273.err> for stderr output of this job.

