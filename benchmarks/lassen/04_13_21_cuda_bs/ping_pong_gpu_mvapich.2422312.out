Warning: Failed writing log files to directory [/var/log/nvidia-mps]. No logs will be available.
Profiling GPU Ping-Pongs
GPU on rank 0 and GPU on rank 1:	7.843971e-07	7.441044e-07	7.414818e-07	6.980896e-07	6.788969e-07	7.297993e-07	7.534027e-07	7.481575e-07	7.708073e-07	8.602142e-07	1.063943e-06	1.315951e-06	2.943707e-05	1.487327e-05	1.539779e-05	1.666307e-05	1.879692e-05	2.257824e-05	3.646135e-05	4.526734e-05	7.534027e-05	1.366138e-04	2.572179e-04	4.985809e-04	
GPU on rank 0 and GPU on rank 2:	1.075625e-06	1.071811e-06	1.072288e-06	9.768009e-07	9.889603e-07	1.018882e-06	1.075149e-06	1.258731e-06	1.472473e-06	1.802921e-06	2.142549e-06	2.986670e-06	3.000748e-05	1.583338e-05	1.654315e-05	1.814246e-05	2.140641e-05	2.794266e-05	4.037261e-05	6.612778e-05	1.163483e-04	2.203941e-04	4.249692e-04	8.333087e-04	
GPU on rank 0 and GPU on rank 3:	1.083970e-06	1.096010e-06	1.080155e-06	9.913445e-07	1.002550e-06	1.037478e-06	1.068473e-06	1.306772e-06	1.487494e-06	1.700521e-06	2.133489e-06	2.958417e-06	3.046215e-05	1.608539e-05	1.683676e-05	1.848578e-05	2.155185e-05	2.797961e-05	4.091501e-05	6.636381e-05	1.179206e-04	2.207637e-04	4.254460e-04	8.338571e-04	
GPU on rank 0 and GPU on rank 4:	2.078176e-06	2.106667e-06	5.454302e-06	2.097249e-06	2.117395e-06	2.988815e-06	2.418518e-06	2.477407e-06	2.568722e-06	3.087759e-06	6.439805e-06	6.892443e-06	2.376008e-05	2.473640e-05	2.635443e-05	3.029943e-05	5.428076e-05	7.246733e-05	1.093829e-04	1.721668e-04	2.529359e-04	4.217386e-04	8.165240e-04	1.556087e-03	
GPU on rank 0 and GPU on rank 5:	2.048492e-06	2.044201e-06	2.086163e-06	2.085924e-06	2.106190e-06	2.127409e-06	2.423406e-06	2.481937e-06	2.581358e-06	3.099561e-06	6.371617e-06	6.819129e-06	2.353108e-05	2.443075e-05	2.611029e-05	2.997398e-05	5.363226e-05	7.176042e-05	1.084435e-04	1.722372e-04	2.498281e-04	4.195809e-04	8.129954e-04	1.552248e-03	
GPU on rank 0 and GPU on rank 6:	5.973935e-06	2.104521e-06	2.175212e-06	2.131104e-06	3.411770e-06	2.211809e-06	2.533317e-06	2.552748e-06	2.739191e-06	3.178120e-06	6.531835e-06	6.864905e-06	2.384925e-05	2.477407e-05	2.633131e-05	3.027081e-05	5.409002e-05	7.238984e-05	1.087451e-04	1.726234e-04	2.507651e-04	4.206181e-04	8.149385e-04	1.552629e-03	
GPU on rank 0 and GPU on rank 7:	2.068400e-06	2.058029e-06	2.169847e-06	2.152920e-06	2.168775e-06	2.250195e-06	2.485514e-06	2.573729e-06	2.825856e-06	3.101230e-06	6.472588e-06	6.773710e-06	2.382016e-05	2.476215e-05	2.633345e-05	3.027439e-05	5.408883e-05	7.239342e-05	1.091659e-04	1.728845e-04	2.508295e-04	4.204869e-04	8.144617e-04	1.554370e-03	
GPU on rank 1 and GPU on rank 2:	1.080155e-06	1.070023e-06	1.057267e-06	9.729862e-07	9.922981e-07	1.044750e-06	1.045823e-06	1.290321e-06	1.414299e-06	1.701474e-06	2.086997e-06	2.831578e-06	2.954566e-05	1.616335e-05	1.689124e-05	1.855850e-05	2.181292e-05	2.804399e-05	4.101872e-05	6.649494e-05	1.179218e-04	2.212405e-04	4.265785e-04	8.354902e-04	
GPU on rank 1 and GPU on rank 3:	1.037121e-06	1.036048e-06	1.041770e-06	5.394578e-06	1.013756e-06	1.067162e-06	1.027107e-06	1.323938e-06	1.441956e-06	1.793265e-06	2.131343e-06	3.019094e-06	2.941000e-05	1.616693e-05	1.685250e-05	1.841784e-05	2.157211e-05	2.814054e-05	4.108310e-05	6.723046e-05	1.191378e-04	2.225995e-04	4.269719e-04	8.352518e-04	
GPU on rank 1 and GPU on rank 4:	2.083659e-06	2.076387e-06	2.101779e-06	2.101064e-06	2.098083e-06	2.124429e-06	2.454638e-06	2.514601e-06	2.598524e-06	3.116965e-06	6.290078e-06	6.972313e-06	2.396500e-05	2.496397e-05	2.652955e-05	3.062248e-05	5.476594e-05	7.326365e-05	1.102090e-04	1.731193e-04	2.514911e-04	4.229307e-04	8.193254e-04	1.557994e-03	
GPU on rank 1 and GPU on rank 5:	2.072811e-06	2.064109e-06	2.102494e-06	2.103448e-06	2.110481e-06	2.123713e-06	2.407312e-06	2.479434e-06	2.600670e-06	3.127098e-06	9.078860e-06	6.954908e-06	2.435851e-05	2.458608e-05	2.617908e-05	3.011227e-05	5.425334e-05	7.242680e-05	1.090789e-04	1.723802e-04	2.510774e-04	4.203677e-04	8.136511e-04	1.552486e-03	
GPU on rank 1 and GPU on rank 6:	2.109289e-06	2.115250e-06	2.157569e-06	2.169490e-06	2.177238e-06	2.219677e-06	2.571583e-06	2.586126e-06	2.758265e-06	3.149986e-06	6.499410e-06	6.797314e-06	2.388227e-05	2.485907e-05	2.645087e-05	3.027558e-05	5.416870e-05	7.254124e-05	1.092076e-04	1.727891e-04	2.508307e-04	4.207253e-04	8.135915e-04	1.553547e-03	
GPU on rank 1 and GPU on rank 7:	2.101541e-06	2.116680e-06	2.156854e-06	2.151847e-06	2.180338e-06	2.213240e-06	2.548456e-06	2.572298e-06	2.830744e-06	3.110290e-06	6.383300e-06	6.759167e-06	2.375960e-05	2.482378e-05	2.638781e-05	3.018498e-05	5.428076e-05	7.280707e-05	1.097882e-04	1.730168e-04	2.510393e-04	4.203081e-04	8.146167e-04	1.553917e-03	
GPU on rank 2 and GPU on rank 3:	7.482767e-07	7.350445e-07	7.627010e-07	7.456541e-07	7.437468e-07	7.616282e-07	7.555485e-07	7.581711e-07	8.082390e-07	8.645058e-07	1.015186e-06	1.294494e-06	2.915823e-05	1.561868e-05	1.607013e-05	1.725793e-05	1.939774e-05	2.331734e-05	3.079772e-05	4.592419e-05	7.611275e-05	1.371622e-04	2.578139e-04	4.991174e-04	
GPU on rank 2 and GPU on rank 4:	2.134085e-06	2.124667e-06	2.169967e-06	2.167702e-06	2.188325e-06	2.224445e-06	2.581120e-06	2.638578e-06	2.787709e-06	3.211737e-06	6.544352e-06	6.811976e-06	2.476525e-05	2.576768e-05	2.741563e-05	3.112912e-05	5.562663e-05	7.423520e-05	1.109350e-04	1.741755e-04	2.523172e-04	4.256248e-04	8.230805e-04	1.560926e-03	
GPU on rank 2 and GPU on rank 5:	2.119422e-06	2.118945e-06	2.177715e-06	2.205253e-06	2.189517e-06	2.232313e-06	2.555966e-06	2.623200e-06	2.771020e-06	3.217816e-06	6.524563e-06	6.761193e-06	2.442539e-05	2.548611e-05	2.708697e-05	3.054619e-05	6.359696e-05	7.327437e-05	1.207519e-04	1.735103e-04	2.521348e-04	4.224300e-04	8.182287e-04	1.556945e-03	
GPU on rank 2 and GPU on rank 6:	2.183914e-06	2.168894e-06	2.213597e-06	2.230644e-06	2.277374e-06	2.300024e-06	2.646089e-06	2.702713e-06	2.893567e-06	3.236175e-06	6.629348e-06	6.886125e-06	2.470338e-05	2.567315e-05	2.725732e-05	3.071785e-05	5.488396e-05	7.335424e-05	1.097584e-04	1.736629e-04	2.518237e-04	4.229903e-04	8.177757e-04	1.557195e-03	
GPU on rank 2 and GPU on rank 7:	2.178192e-06	2.174973e-06	2.214551e-06	2.221704e-06	2.233624e-06	2.269149e-06	2.601624e-06	2.668619e-06	2.818465e-06	3.238201e-06	6.362557e-06	6.917834e-06	2.457905e-05	2.549994e-05	2.711904e-05	3.047347e-05	5.497456e-05	7.323980e-05	1.099181e-04	1.737356e-04	2.516460e-04	4.223466e-04	8.177280e-04	1.557887e-03	
GPU on rank 3 and GPU on rank 4:	2.105713e-06	2.089620e-06	2.117395e-06	2.097607e-06	2.102613e-06	2.184033e-06	2.518058e-06	3.763795e-06	2.805114e-06	3.300071e-06	6.542683e-06	6.878853e-06	2.470398e-05	2.584803e-05	2.765298e-05	3.120542e-05	5.585670e-05	7.412434e-05	1.106131e-04	1.744890e-04	2.729273e-04	4.245520e-04	8.217931e-04	1.561284e-03	
GPU on rank 3 and GPU on rank 5:	2.071381e-06	2.076745e-06	2.102852e-06	2.110481e-06	2.117634e-06	2.188563e-06	2.520800e-06	2.579331e-06	2.820134e-06	3.136516e-06	6.404161e-06	6.741047e-06	2.478218e-05	2.554893e-05	2.716935e-05	3.060222e-05	5.492926e-05	7.334828e-05	1.097691e-04	1.736951e-04	2.518797e-04	4.227757e-04	8.176088e-04	1.556563e-03	
GPU on rank 3 and GPU on rank 6:	2.151132e-06	2.145529e-06	2.191186e-06	2.195597e-06	2.196908e-06	2.243161e-06	2.575994e-06	2.641559e-06	2.802968e-06	3.192782e-06	6.555676e-06	6.895304e-06	2.471161e-05	2.668726e-05	2.740395e-05	3.076673e-05	5.480051e-05	7.332563e-05	1.098716e-04	1.737320e-04	2.516043e-04	4.220486e-04	8.583069e-04	1.556838e-03	
GPU on rank 3 and GPU on rank 7:	2.079368e-06	2.079368e-06	2.135515e-06	2.146959e-06	2.152443e-06	2.199292e-06	2.489924e-06	2.557397e-06	2.672434e-06	3.174067e-06	6.283283e-06	6.867886e-06	2.453828e-05	2.547145e-05	2.710867e-05	3.072500e-05	5.477190e-05	7.298231e-05	1.098442e-04	1.736820e-04	2.515066e-04	4.222393e-04	8.176446e-04	1.558590e-03	


app 0: ./time_ping_pong_gpu 
rank: 0: { host: 1; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 1: { host: 1; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 2: { host: 1; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 3: { host: 1; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 4: { host: 2; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 5: { host: 2; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 6: { host: 2; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 7: { host: 2; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0

------------------------------------------------------------
Sender: LSF System <lsfadmin@lassen710>
Subject: Job 2422312: <ping_pong_gpu_mvapich> in cluster <lassen> Done

Job <ping_pong_gpu_mvapich> was submitted from host <lassen709> by user <locksl> in cluster <lassen> at Tue Apr 13 11:46:35 2021
Job was executed on host(s) <1*lassen710>, in queue <pdebug>, as user <locksl> in cluster <lassen> at Tue Apr 13 11:46:37 2021
                            <40*lassen28>
                            <40*lassen19>
</g/g16/locksl> was used as the home directory.
</g/g16/locksl/bin/bench_press_scripts> was used as the working directory.
Started at Tue Apr 13 11:46:37 2021
Terminated at Tue Apr 13 11:47:39 2021
Results reported at Tue Apr 13 11:47:39 2021

Your job looked like:

------------------------------------------------------------
# LSBATCH: User input
#!/bin/bash
#BSUB -J ping_pong_gpu_mvapich
#BSUB -e ping_pong_gpu_mvapich.%J.err
#BSUB -o ping_pong_gpu_mvapich.%J.out
#BSUB -nnodes 2
#BSUB -q pdebug
#BSUB -W 00:15

module load gcc
module load cuda
module load mvapich2

# Default paramter values for mvapich2
export MV2_USE_CUDA=1
export MV2_USE_GDR=1

# TESTING PARAMETER
#export MV2_CUDA_BLOCK_SIZE=131072
#export MV2_CUDA_BLOCK_SIZE=262144
#export MV2_CUDA_BLOCK_SIZE=524288
#export MV2_CUDA_BLOCK_SIZE=786432
#export MV2_CUDA_BLOCK_SIZE=1048576
#export MV2_CUDA_BLOCK_SIZE=1310720
export MV2_CUDA_BLOCK_SIZE=1835008

export MV2_GPUDIRECT_LIMIT=8192
export MV2_USE_GPUDIRECT_RECEIVE_LIMIT=131072
export MV2_CUDA_IPC_THRESHOLD=32768
#export MV2_CUDA_IPC_THRESHOLD=524288

# Parameters for tuning block size limit for gpu to cpu memory copies with gdr
export MV2_GDRCOPY_LIMIT=8192

# Parameter setting for Multi-IB and Multi-GPU node
#export MV2_PROCESS_TO_RAIL_MAPPING=BUNCH # not currently working with multiple resource set allocation

cd /g/g16/locksl/BenchPress/mvapich_build/examples

nvidia-cuda-mps-control -d

#jsrun -a4 -c4 -g4 -r1 -n2 -M "-gpu" --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./time_ping_pong_gpu
jsrun -a4 -c4 -g4 -r1 -n2 --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./time_ping_pong_gpu

echo quit | nvidia-cuda-mps-control



------------------------------------------------------------

Successfully completed.

Resource usage summary:

    CPU time :                                   0.20 sec.
    Max Memory :                                 59 MB
    Average Memory :                             54.00 MB
    Total Requested Memory :                     -
    Delta Memory :                               -
    Max Swap :                                   1425 MB
    Max Processes :                              4
    Max Threads :                                27
    Run time :                                   61 sec.
    Turnaround time :                            64 sec.

The output (if any) is above this job summary.



PS:

Read file <ping_pong_gpu_mvapich.2422312.err> for stderr output of this job.

