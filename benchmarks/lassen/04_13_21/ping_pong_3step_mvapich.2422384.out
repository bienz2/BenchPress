Warning: Failed writing log files to directory [/var/log/nvidia-mps]. No logs will be available.
Profiling GPU Ping-Pongs
GPU on rank 0 and GPU on rank 1:	2.667570e-05	2.743471e-05	2.660275e-05	2.845562e-05	2.665854e-05	2.670014e-05	2.674758e-05	2.686644e-05	2.715313e-05	2.737749e-05	2.949452e-05	2.932918e-05	3.056765e-05	3.117120e-05	3.777671e-05	4.462957e-05	5.673170e-05	7.710338e-05	1.189649e-04	2.004898e-04	3.652310e-04	8.293986e-04	1.792598e-03	3.428745e-03	
GPU on rank 0 and GPU on rank 2:	2.697277e-05	2.793348e-05	2.709305e-05	2.720189e-05	2.714920e-05	2.788794e-05	2.730346e-05	2.758062e-05	2.806771e-05	2.864647e-05	2.979338e-05	3.103948e-05	3.363681e-05	3.798509e-05	4.820585e-05	6.790757e-05	1.022112e-04	1.659620e-04	2.985728e-04	5.746388e-04	1.139079e-03	1.968920e-03	3.035188e-03	5.392361e-03	
GPU on rank 0 and GPU on rank 3:	2.774680e-05	2.773249e-05	2.772665e-05	2.777171e-05	2.781749e-05	2.787113e-05	2.793491e-05	2.815437e-05	2.847314e-05	2.887952e-05	3.003705e-05	3.159606e-05	3.495800e-05	3.839839e-05	4.891479e-05	6.784916e-05	1.032674e-04	1.668930e-04	3.021634e-04	5.750310e-04	1.157520e-03	1.977122e-03	3.094971e-03	5.438972e-03	
GPU on rank 0 and GPU on rank 4:	2.918339e-05	2.909255e-05	2.983010e-05	2.914166e-05	2.984691e-05	2.931333e-05	2.965128e-05	3.065145e-05	3.011847e-05	3.142488e-05	3.223670e-05	3.775990e-05	4.169285e-05	4.205370e-05	4.499435e-05	4.997849e-05	6.038070e-05	7.864237e-05	1.172149e-04	1.938117e-04	3.375447e-04	6.329417e-04	1.220548e-03	2.395773e-03	
GPU on rank 0 and GPU on rank 5:	2.840126e-05	2.840710e-05	2.857101e-05	2.853942e-05	2.851784e-05	2.858746e-05	2.894390e-05	2.912068e-05	2.954543e-05	3.135574e-05	3.171062e-05	3.739023e-05	4.162443e-05	4.115164e-05	4.408729e-05	4.981756e-05	6.041527e-05	7.922053e-05	1.176226e-04	1.911664e-04	3.385329e-04	6.336331e-04	1.223409e-03	2.402222e-03	
GPU on rank 0 and GPU on rank 6:	2.829731e-05	2.830088e-05	2.836800e-05	2.845287e-05	3.650987e-05	2.852643e-05	2.885723e-05	2.896571e-05	2.927339e-05	3.042626e-05	3.160667e-05	3.720391e-05	4.145229e-05	4.090416e-05	4.422975e-05	4.965186e-05	5.956173e-05	7.865429e-05	1.168275e-04	1.904511e-04	3.379762e-04	6.337643e-04	1.224828e-03	2.402210e-03	
GPU on rank 0 and GPU on rank 7:	2.866685e-05	2.867353e-05	2.876902e-05	2.877605e-05	2.878201e-05	2.882218e-05	2.913308e-05	2.922773e-05	2.955186e-05	3.047800e-05	3.181601e-05	3.704941e-05	4.176891e-05	4.119360e-05	4.436743e-05	4.983068e-05	6.002903e-05	7.851720e-05	1.162088e-04	1.899600e-04	3.371155e-04	6.333470e-04	1.221180e-03	2.396548e-03	
GPU on rank 1 and GPU on rank 2:	2.690780e-05	2.687311e-05	2.690995e-05	2.691686e-05	2.690625e-05	2.695847e-05	2.700281e-05	2.712011e-05	2.744877e-05	2.813268e-05	2.982247e-05	3.118956e-05	3.373933e-05	3.729367e-05	4.805791e-05	6.654382e-05	1.020932e-04	1.649535e-04	2.976716e-04	5.624616e-04	1.132429e-03	1.975274e-03	3.088987e-03	5.395734e-03	
GPU on rank 1 and GPU on rank 3:	2.730441e-05	2.726245e-05	2.724850e-05	2.736259e-05	2.732027e-05	2.735662e-05	2.742481e-05	2.762139e-05	2.788222e-05	2.871072e-05	2.981710e-05	3.168488e-05	3.437424e-05	3.819871e-05	4.919243e-05	6.742597e-05	1.030946e-04	1.670969e-04	3.008914e-04	5.664921e-04	1.143365e-03	1.987529e-03	3.134835e-03	5.437779e-03	
GPU on rank 1 and GPU on rank 4:	2.864218e-05	2.861488e-05	2.930379e-05	2.867174e-05	2.939939e-05	2.877545e-05	3.016078e-05	2.951336e-05	2.988458e-05	3.096747e-05	3.177416e-05	3.740406e-05	4.238296e-05	4.195547e-05	4.492843e-05	4.986644e-05	6.022334e-05	7.856965e-05	1.165926e-04	1.922071e-04	3.367710e-04	6.334066e-04	1.220536e-03	2.396548e-03	
GPU on rank 1 and GPU on rank 5:	2.804065e-05	2.793157e-05	2.805328e-05	2.825010e-05	2.807331e-05	2.814233e-05	2.855027e-05	2.868092e-05	2.926099e-05	3.004980e-05	3.941417e-05	3.694952e-05	4.155183e-05	4.107094e-05	4.403567e-05	4.985332e-05	6.048918e-05	7.840753e-05	1.175487e-04	1.905906e-04	3.376079e-04	6.344080e-04	1.223624e-03	2.402139e-03	
GPU on rank 1 and GPU on rank 6:	2.788758e-05	2.794170e-05	2.797055e-05	2.794957e-05	2.800643e-05	2.800560e-05	2.842522e-05	2.858984e-05	2.874029e-05	3.004003e-05	3.106248e-05	3.657258e-05	4.127955e-05	4.071963e-05	4.401660e-05	4.953146e-05	5.928516e-05	7.701039e-05	1.164567e-04	1.899183e-04	3.371799e-04	6.335855e-04	1.222956e-03	2.402353e-03	
GPU on rank 1 and GPU on rank 7:	2.815092e-05	2.808404e-05	2.819204e-05	2.820694e-05	2.823830e-05	2.831483e-05	2.862489e-05	2.874398e-05	2.906787e-05	2.996862e-05	3.119063e-05	3.656197e-05	4.193366e-05	4.099488e-05	4.418087e-05	4.961371e-05	5.940795e-05	7.709980e-05	1.158357e-04	1.890492e-04	3.366506e-04	6.327152e-04	1.220596e-03	2.397156e-03	
GPU on rank 2 and GPU on rank 3:	2.619934e-05	2.607989e-05	2.614892e-05	2.612853e-05	2.609301e-05	2.615297e-05	2.617252e-05	2.626193e-05	2.650809e-05	2.711523e-05	2.853417e-05	2.948833e-05	3.113639e-05	3.276324e-05	4.023659e-05	5.107045e-05	6.558657e-05	9.272456e-05	1.497936e-04	2.623987e-04	4.816902e-04	8.313656e-04	1.706648e-03	3.448296e-03	
GPU on rank 2 and GPU on rank 4:	2.810621e-05	2.807450e-05	2.810812e-05	2.817857e-05	2.883601e-05	2.821445e-05	2.923346e-05	2.873528e-05	2.928603e-05	3.070247e-05	3.148806e-05	3.754783e-05	4.201353e-05	4.086530e-05	4.410708e-05	4.925728e-05	6.385088e-05	7.796884e-05	1.165175e-04	1.893079e-04	3.362024e-04	6.326556e-04	1.221836e-03	2.398384e-03	
GPU on rank 2 and GPU on rank 5:	2.749062e-05	2.752042e-05	2.759492e-05	2.758932e-05	2.764070e-05	2.766728e-05	2.809083e-05	2.816796e-05	2.839327e-05	2.946115e-05	3.077590e-05	3.642905e-05	4.077113e-05	4.012179e-05	4.330301e-05	4.872322e-05	6.806850e-05	7.773757e-05	1.253796e-04	1.896119e-04	3.371465e-04	6.328821e-04	1.222551e-03	2.401268e-03	
GPU on rank 2 and GPU on rank 6:	2.745748e-05	2.742863e-05	2.754164e-05	2.758121e-05	2.755284e-05	2.760541e-05	2.795768e-05	2.800763e-05	2.841818e-05	2.907205e-05	3.091645e-05	3.645945e-05	4.083478e-05	4.034853e-05	4.379773e-05	4.883409e-05	5.856752e-05	7.725477e-05	1.149678e-04	1.897943e-04	3.369820e-04	6.335735e-04	1.223242e-03	2.401876e-03	
GPU on rank 2 and GPU on rank 7:	2.772951e-05	2.769256e-05	2.778494e-05	2.779973e-05	2.778995e-05	2.784705e-05	2.822053e-05	2.832055e-05	2.864206e-05	2.938426e-05	3.105593e-05	3.665352e-05	4.094720e-05	4.035819e-05	4.366302e-05	4.906058e-05	5.880356e-05	7.719040e-05	1.150262e-04	1.887274e-04	3.361309e-04	6.321549e-04	1.294005e-03	2.397192e-03	
GPU on rank 3 and GPU on rank 4:	2.812302e-05	2.879226e-05	2.815163e-05	2.882171e-05	2.820778e-05	2.833200e-05	2.872217e-05	3.743792e-05	3.019536e-05	3.033245e-05	3.178871e-05	3.770316e-05	4.126132e-05	4.088581e-05	4.421592e-05	4.946709e-05	5.954981e-05	8.245945e-05	1.160753e-04	1.898491e-04	3.400254e-04	6.325245e-04	1.220775e-03	2.400875e-03	
GPU on rank 3 and GPU on rank 5:	2.752900e-05	2.749515e-05	2.755034e-05	2.756774e-05	2.765191e-05	2.770793e-05	2.813876e-05	2.817059e-05	2.851820e-05	2.960551e-05	3.108001e-05	3.649437e-05	4.087985e-05	4.017425e-05	4.356384e-05	4.892230e-05	5.904913e-05	7.798433e-05	1.156473e-04	1.895392e-04	3.373384e-04	6.342292e-04	1.223385e-03	2.402234e-03	
GPU on rank 3 and GPU on rank 6:	2.754116e-05	2.745938e-05	2.751434e-05	2.750885e-05	2.752984e-05	2.762961e-05	2.795613e-05	2.802086e-05	2.828324e-05	2.908719e-05	3.089845e-05	3.658009e-05	4.081511e-05	4.026175e-05	4.369593e-05	4.898071e-05	5.868912e-05	7.724643e-05	1.150393e-04	1.889741e-04	3.370345e-04	6.338477e-04	1.232708e-03	2.402186e-03	
GPU on rank 3 and GPU on rank 7:	2.756989e-05	2.758527e-05	2.760041e-05	2.762544e-05	2.764142e-05	2.778494e-05	2.809203e-05	2.821517e-05	2.847159e-05	2.926826e-05	3.094935e-05	3.674245e-05	4.093707e-05	4.032242e-05	4.376185e-05	4.901052e-05	5.887866e-05	7.737279e-05	1.154125e-04	1.895308e-04	3.364289e-04	6.329536e-04	1.220667e-03	2.398777e-03	


app 0: ./time_ping_pong_3step 
rank: 0: { host: 1; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 1: { host: 1; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 2: { host: 1; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 3: { host: 1; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 4: { host: 2; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 5: { host: 2; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 6: { host: 2; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 7: { host: 2; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0

------------------------------------------------------------
Sender: LSF System <lsfadmin@lassen710>
Subject: Job 2422384: <ping_pong_3step_mvapich> in cluster <lassen> Done

Job <ping_pong_3step_mvapich> was submitted from host <lassen709> by user <locksl> in cluster <lassen> at Tue Apr 13 12:32:30 2021
Job was executed on host(s) <1*lassen710>, in queue <pdebug>, as user <locksl> in cluster <lassen> at Tue Apr 13 12:32:33 2021
                            <40*lassen36>
                            <40*lassen35>
</g/g16/locksl> was used as the home directory.
</g/g16/locksl/bin/bench_press_scripts> was used as the working directory.
Started at Tue Apr 13 12:32:33 2021
Terminated at Tue Apr 13 12:34:15 2021
Results reported at Tue Apr 13 12:34:15 2021

Your job looked like:

------------------------------------------------------------
# LSBATCH: User input
#!/bin/bash
#BSUB -J ping_pong_3step_mvapich
#BSUB -e ping_pong_3step_mvapich.%J.err
#BSUB -o ping_pong_3step_mvapich.%J.out
#BSUB -nnodes 2
#BSUB -q pdebug
#BSUB -W 00:15

module load gcc
module load cuda
module load mvapich2

# Default paramter values for mvapich2
export MV2_USE_CUDA=1
export MV2_USE_GDR=1

# TESTING PARAMETER
#export MV2_CUDA_BLOCK_SIZE=131072
#export MV2_CUDA_BLOCK_SIZE=262144
#export MV2_CUDA_BLOCK_SIZE=524288
#export MV2_CUDA_BLOCK_SIZE=786432
#export MV2_CUDA_BLOCK_SIZE=1048576
#export MV2_CUDA_BLOCK_SIZE=1310720
#export MV2_CUDA_BLOCK_SIZE=1835008

export MV2_GPUDIRECT_LIMIT=8192
export MV2_USE_GPUDIRECT_RECEIVE_LIMIT=131072
export MV2_CUDA_IPC_THRESHOLD=32768
#export MV2_CUDA_IPC_THRESHOLD=524288

# Parameters for tuning block size limit for gpu to cpu memory copies with gdr
export MV2_GDRCOPY_LIMIT=8192

# Parameter setting for Multi-IB and Multi-GPU node
#export MV2_PROCESS_TO_RAIL_MAPPING=BUNCH # not currently working with multiple resource set allocation

cd /g/g16/locksl/BenchPress/mvapich_build/examples

nvidia-cuda-mps-control -d

jsrun -a4 -c4 -g4 -r1 -n2 --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./time_ping_pong_3step

echo quit | nvidia-cuda-mps-control



------------------------------------------------------------

Successfully completed.

Resource usage summary:

    CPU time :                                   0.22 sec.
    Max Memory :                                 59 MB
    Average Memory :                             54.91 MB
    Total Requested Memory :                     -
    Delta Memory :                               -
    Max Swap :                                   1425 MB
    Max Processes :                              4
    Max Threads :                                27
    Run time :                                   101 sec.
    Turnaround time :                            105 sec.

The output (if any) is above this job summary.



PS:

Read file <ping_pong_3step_mvapich.2422384.err> for stderr output of this job.

