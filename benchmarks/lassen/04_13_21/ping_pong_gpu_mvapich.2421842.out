Warning: Failed writing log files to directory [/var/log/nvidia-mps]. No logs will be available.
Profiling GPU Ping-Pongs
GPU on rank 0 and GPU on rank 1:	7.247925e-07	6.557703e-07	7.042885e-07	7.436275e-07	7.936954e-07	7.512569e-07	7.053614e-07	8.363724e-07	8.459091e-07	8.916855e-07	1.059890e-06	1.317501e-06	2.735198e-05	1.484060e-05	1.539290e-05	2.447367e-05	1.869082e-05	2.263308e-05	3.008366e-05	4.509687e-05	
GPU on rank 0 and GPU on rank 2:	1.055360e-06	1.047969e-06	1.052499e-06	9.745359e-07	9.738207e-07	1.010180e-06	1.047134e-06	1.336694e-06	1.449585e-06	1.748443e-06	2.148271e-06	3.035307e-06	2.888036e-05	1.648879e-05	1.642001e-05	1.808882e-05	2.134323e-05	2.751470e-05	4.045963e-05	6.529689e-05	
GPU on rank 0 and GPU on rank 3:	1.053333e-06	1.062036e-06	1.061797e-06	9.661913e-07	9.832382e-07	1.018286e-06	1.100898e-06	1.330614e-06	1.452804e-06	1.744270e-06	2.120495e-06	2.973437e-06	2.934468e-05	1.591146e-05	1.666963e-05	1.845121e-05	2.146602e-05	2.795339e-05	4.078388e-05	7.387400e-05	
GPU on rank 0 and GPU on rank 4:	2.136469e-06	3.133416e-06	2.174377e-06	2.162218e-06	2.169847e-06	2.203584e-06	2.489567e-06	2.538681e-06	2.648354e-06	3.158808e-06	7.305622e-06	6.916523e-06	2.340209e-05	2.594602e-05	2.605259e-05	3.007412e-05	5.403280e-05	7.242799e-05	9.395957e-05	1.497662e-04	
GPU on rank 0 and GPU on rank 5:	2.094388e-06	2.088428e-06	2.126336e-06	2.131343e-06	2.134442e-06	2.262473e-06	2.482891e-06	2.524972e-06	2.630115e-06	3.141880e-06	6.394386e-06	6.871581e-06	2.349019e-05	2.446628e-05	2.607608e-05	2.997160e-05	5.404353e-05	7.232189e-05	9.374619e-05	1.666212e-04	
GPU on rank 0 and GPU on rank 6:	2.154708e-06	2.276540e-06	2.168655e-06	2.166390e-06	2.186179e-06	2.241135e-06	2.588987e-06	2.644420e-06	2.804756e-06	3.192186e-06	6.527185e-06	6.828666e-06	2.358985e-05	2.452123e-05	2.604032e-05	2.993107e-05	5.397081e-05	7.222056e-05	9.369850e-05	1.497126e-04	
GPU on rank 0 and GPU on rank 7:	6.708145e-06	2.147079e-06	2.200007e-06	2.206087e-06	2.215743e-06	2.254009e-06	2.570987e-06	2.612352e-06	2.848387e-06	3.147244e-06	6.418586e-06	6.844521e-06	2.356946e-05	2.455223e-05	2.610469e-05	3.018498e-05	5.389929e-05	7.225037e-05	9.363294e-05	1.501477e-04	
GPU on rank 1 and GPU on rank 2:	1.063824e-06	1.056910e-06	1.041412e-06	9.764433e-07	9.855032e-07	1.023412e-06	1.053452e-06	1.183391e-06	1.433372e-06	1.674533e-06	2.062440e-06	2.828479e-06	2.924371e-05	1.595747e-05	1.672184e-05	1.868129e-05	2.164125e-05	2.791643e-05	4.081011e-05	6.646037e-05	
GPU on rank 1 and GPU on rank 3:	1.050234e-06	1.045346e-06	1.041412e-06	9.821653e-07	9.741783e-07	9.924173e-07	1.044154e-06	1.329899e-06	1.458645e-06	1.705170e-06	2.107620e-06	2.955675e-06	2.992308e-05	1.605892e-05	1.678300e-05	1.813173e-05	2.131104e-05	2.827406e-05	4.096508e-05	6.716728e-05	
GPU on rank 1 and GPU on rank 4:	2.096176e-06	2.091169e-06	2.154708e-06	2.157569e-06	2.165437e-06	2.212644e-06	2.455115e-06	3.540874e-06	2.617955e-06	3.133059e-06	6.321311e-06	7.021427e-06	2.347672e-05	2.453077e-05	2.630222e-05	2.997518e-05	5.404472e-05	7.246375e-05	9.411097e-05	1.498461e-04	
GPU on rank 1 and GPU on rank 5:	2.078176e-06	2.075076e-06	2.187967e-06	2.111793e-06	2.099395e-06	2.144575e-06	2.453208e-06	2.488017e-06	2.607465e-06	3.111959e-06	6.353021e-06	6.925344e-06	2.341413e-05	2.438939e-05	2.621090e-05	2.983570e-05	5.381346e-05	7.222533e-05	9.392262e-05	1.499629e-04	
GPU on rank 1 and GPU on rank 6:	2.164602e-06	2.158284e-06	2.219319e-06	2.310991e-06	2.213955e-06	2.268791e-06	2.546191e-06	2.597809e-06	2.785683e-06	3.205776e-06	6.479383e-06	6.844759e-06	2.517974e-05	2.468014e-05	2.634382e-05	2.989531e-05	5.400777e-05	7.254601e-05	9.403229e-05	1.495123e-04	
GPU on rank 1 and GPU on rank 7:	2.141476e-06	2.146959e-06	2.175927e-06	2.173543e-06	2.198100e-06	2.257705e-06	2.535343e-06	2.558708e-06	2.852321e-06	3.115773e-06	6.398320e-06	6.779909e-06	2.363706e-05	2.457535e-05	2.620804e-05	2.981424e-05	5.376816e-05	7.225156e-05	9.383440e-05	1.499879e-04	
GPU on rank 2 and GPU on rank 3:	7.485151e-07	7.288456e-07	7.570982e-07	7.430315e-07	7.371902e-07	7.641315e-07	7.632971e-07	7.669926e-07	8.077621e-07	8.547306e-07	1.060963e-06	1.348257e-06	2.715337e-05	1.484990e-05	1.554108e-05	1.668096e-05	1.880646e-05	2.266526e-05	3.021717e-05	4.534841e-05	
GPU on rank 2 and GPU on rank 4:	2.138257e-06	2.135277e-06	2.180099e-06	2.186775e-06	2.194881e-06	2.226233e-06	2.564907e-06	2.637625e-06	2.784729e-06	3.195643e-06	6.587744e-06	6.864309e-06	2.367353e-05	2.479017e-05	2.659714e-05	3.017902e-05	5.412340e-05	7.227898e-05	9.391546e-05	1.496041e-04	
GPU on rank 2 and GPU on rank 5:	2.140522e-06	2.142906e-06	2.186060e-06	2.172112e-06	2.189517e-06	2.367020e-06	2.564549e-06	2.648950e-06	2.788186e-06	3.197432e-06	6.520510e-06	6.776452e-06	2.361178e-05	3.311419e-05	2.628064e-05	3.008842e-05	5.405664e-05	7.241488e-05	9.393692e-05	1.497638e-04	
GPU on rank 2 and GPU on rank 6:	2.220631e-06	2.224803e-06	2.292156e-06	2.271652e-06	2.303720e-06	2.355337e-06	2.652168e-06	2.719164e-06	2.914667e-06	3.243446e-06	6.686807e-06	7.004619e-06	2.394438e-05	2.492177e-05	2.652276e-05	3.014445e-05	5.437136e-05	7.243872e-05	9.387136e-05	1.496613e-04	
GPU on rank 2 and GPU on rank 7:	2.161980e-06	2.161622e-06	2.238989e-06	2.237082e-06	2.238870e-06	2.276778e-06	2.604961e-06	2.683520e-06	2.825260e-06	3.192663e-06	6.443262e-06	6.940007e-06	2.377880e-05	2.476978e-05	2.638519e-05	3.008723e-05	5.409122e-05	7.211924e-05	9.374380e-05	1.496387e-04	
GPU on rank 3 and GPU on rank 4:	2.109528e-06	2.115250e-06	2.135873e-06	2.146840e-06	2.145886e-06	2.219558e-06	2.560377e-06	2.595544e-06	2.815366e-06	3.141761e-06	6.476521e-06	6.890178e-06	2.370179e-05	2.473629e-05	2.646005e-05	3.020763e-05	6.370068e-05	7.235169e-05	9.418607e-05	1.502156e-04	
GPU on rank 3 and GPU on rank 5:	2.100110e-06	2.097011e-06	2.146244e-06	2.140999e-06	2.147198e-06	2.238274e-06	2.511978e-06	2.576947e-06	2.792358e-06	3.123999e-06	6.430984e-06	6.728888e-06	2.360201e-05	2.464163e-05	2.629149e-05	2.991915e-05	5.399585e-05	7.248163e-05	9.407640e-05	1.502049e-04	
GPU on rank 3 and GPU on rank 6:	2.192736e-06	2.182722e-06	2.236128e-06	2.220511e-06	2.225280e-06	2.256393e-06	2.601266e-06	2.654195e-06	2.798796e-06	3.239989e-06	6.427050e-06	6.939769e-06	2.389419e-05	2.494681e-05	2.638304e-05	3.007650e-05	5.431771e-05	7.291913e-05	9.439588e-05	1.503229e-04	
GPU on rank 3 and GPU on rank 7:	2.079368e-06	2.062201e-06	2.098441e-06	2.106428e-06	2.110600e-06	2.168655e-06	2.499819e-06	2.550721e-06	2.700806e-06	3.141046e-06	6.261110e-06	6.884217e-06	2.373397e-05	2.476680e-05	2.621663e-05	2.990842e-05	5.395293e-05	7.244587e-05	9.362936e-05	1.499712e-04	


app 0: ./time_ping_pong_gpu 
rank: 0: { host: 1; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 1: { host: 1; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 2: { host: 1; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 3: { host: 1; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 4: { host: 2; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 5: { host: 2; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 6: { host: 2; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 7: { host: 2; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0

------------------------------------------------------------
Sender: LSF System <lsfadmin@lassen710>
Subject: Job 2421842: <ping_pong_gpu_mvapich> in cluster <lassen> Done

Job <ping_pong_gpu_mvapich> was submitted from host <lassen709> by user <locksl> in cluster <lassen> at Tue Apr 13 08:05:40 2021
Job was executed on host(s) <1*lassen710>, in queue <pdebug>, as user <locksl> in cluster <lassen> at Tue Apr 13 08:05:43 2021
                            <40*lassen35>
                            <40*lassen34>
</g/g16/locksl> was used as the home directory.
</g/g16/locksl/bin/bench_press_scripts> was used as the working directory.
Started at Tue Apr 13 08:05:43 2021
Terminated at Tue Apr 13 08:06:06 2021
Results reported at Tue Apr 13 08:06:06 2021

Your job looked like:

------------------------------------------------------------
# LSBATCH: User input
#!/bin/bash
#BSUB -J ping_pong_gpu_mvapich
#BSUB -e ping_pong_gpu_mvapich.%J.err
#BSUB -o ping_pong_gpu_mvapich.%J.out
#BSUB -nnodes 2
#BSUB -q pdebug
#BSUB -W 00:15

module load gcc
module load cuda
module load mvapich2

# Default paramter values for mvapich2
export MV2_USE_CUDA=1
export MV2_USE_GDR=1

# TESTING PARAMETER
#export MV2_CUDA_BLOCK_SIZE=262144
export MV2_CUDA_BLOCK_SIZE=524288

export MV2_GPUDIRECT_LIMIT=8192
export MV2_USE_GPUDIRECT_RECEIVE_LIMIT=131072
export MV2_CUDA_IPC_THRESHOLD=32768
#export MV2_CUDA_IPC_THRESHOLD=524288

# Parameters for tuning block size limit for gpu to cpu memory copies with gdr
export MV2_GDRCOPY_LIMIT=8192

# Parameter setting for Multi-IB and Multi-GPU node
#export MV2_PROCESS_TO_RAIL_MAPPING=BUNCH # not currently working with multiple resource set allocation

cd /g/g16/locksl/BenchPress/mvapich_build/examples

nvidia-cuda-mps-control -d

#jsrun -a4 -c4 -g4 -r1 -n2 -M "-gpu" --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./time_ping_pong_gpu
jsrun -a4 -c4 -g4 -r1 -n2 --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./time_ping_pong_gpu

echo quit | nvidia-cuda-mps-control



------------------------------------------------------------

Successfully completed.

Resource usage summary:

    CPU time :                                   0.20 sec.
    Max Memory :                                 -
    Average Memory :                             -
    Total Requested Memory :                     -
    Delta Memory :                               -
    Max Swap :                                   -
    Max Processes :                              -
    Max Threads :                                -
    Run time :                                   23 sec.
    Turnaround time :                            26 sec.

The output (if any) is above this job summary.



PS:

Read file <ping_pong_gpu_mvapich.2421842.err> for stderr output of this job.

