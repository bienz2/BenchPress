Warning: Failed writing log files to directory [/var/log/nvidia-mps]. No logs will be available.
Profiling GPU Ping-Pongs
GPU on rank 0 and GPU on rank 1:	7.755756e-07	7.723570e-07	7.623434e-07	7.594824e-07	7.742643e-07	7.681847e-07	7.362366e-07	7.706881e-07	7.799864e-07	8.796453e-07	1.083612e-06	1.315713e-06	2.708614e-05	1.485550e-05	1.628077e-05	1.674175e-05	1.877785e-05	2.268076e-05	3.021240e-05	4.524350e-05	7.547021e-05	1.367211e-04	2.573133e-04	4.983664e-04	
GPU on rank 0 and GPU on rank 2:	1.064301e-06	1.059532e-06	1.056194e-06	9.810925e-07	9.826422e-07	1.000285e-06	1.077414e-06	1.291275e-06	1.464367e-06	1.745105e-06	2.135634e-06	2.949476e-06	2.876091e-05	1.648152e-05	1.640487e-05	1.807570e-05	2.133012e-05	2.756000e-05	4.037499e-05	6.564379e-05	1.163280e-04	2.197504e-04	4.249454e-04	8.331537e-04	
GPU on rank 0 and GPU on rank 3:	1.054525e-06	1.047969e-06	1.049995e-06	9.635687e-07	9.951591e-07	1.021504e-06	1.066685e-06	1.376152e-06	1.473308e-06	1.677394e-06	2.119422e-06	2.922297e-06	2.926886e-05	1.601398e-05	1.742399e-05	1.846075e-05	2.147675e-05	2.788544e-05	4.062653e-05	6.651163e-05	1.178002e-04	2.211213e-04	4.257560e-04	8.359671e-04	
GPU on rank 0 and GPU on rank 4:	4.767299e-06	2.125144e-06	2.122521e-06	2.136111e-06	2.133012e-06	2.165437e-06	2.448797e-06	2.518296e-06	2.614498e-06	3.165007e-06	6.503940e-06	6.924629e-06	2.404225e-05	2.508855e-05	2.677345e-05	3.062606e-05	5.473256e-05	7.302523e-05	1.007903e-04	1.437545e-04	2.558601e-04	4.737258e-04	9.001136e-04	1.741052e-03	
GPU on rank 0 and GPU on rank 5:	2.084851e-06	2.079248e-06	2.127886e-06	2.147079e-06	2.126932e-06	2.173781e-06	2.468348e-06	2.510071e-06	2.615213e-06	3.122687e-06	7.462740e-06	6.784916e-06	2.349806e-05	2.458847e-05	2.635026e-05	3.022909e-05	5.415678e-05	7.246614e-05	9.998918e-05	1.417685e-04	2.523601e-04	4.676104e-04	8.915901e-04	1.732767e-03	
GPU on rank 0 and GPU on rank 6:	2.141953e-06	2.111435e-06	2.231479e-06	2.218962e-06	3.438473e-06	2.260685e-06	2.544641e-06	2.616286e-06	2.771378e-06	3.226161e-06	6.593347e-06	6.844997e-06	2.402997e-05	2.490175e-05	2.787089e-05	3.046393e-05	5.432367e-05	7.255435e-05	9.997845e-05	1.420903e-04	2.553892e-04	4.687548e-04	8.952379e-04	1.736569e-03	
GPU on rank 0 and GPU on rank 7:	2.110362e-06	2.097726e-06	2.146482e-06	2.135992e-06	2.170801e-06	2.254128e-06	2.526402e-06	2.637148e-06	6.951690e-06	3.146291e-06	6.423235e-06	6.795883e-06	2.372491e-05	2.471578e-05	2.643895e-05	3.031135e-05	5.405068e-05	7.234097e-05	1.143801e-04	1.419449e-04	2.528226e-04	4.683018e-04	8.934379e-04	1.734257e-03	
GPU on rank 1 and GPU on rank 2:	1.080155e-06	1.071215e-06	1.052618e-06	9.891987e-07	1.000881e-06	1.028776e-06	1.052380e-06	1.245141e-06	1.373291e-06	1.634359e-06	2.065778e-06	2.870083e-06	2.920294e-05	1.599324e-05	1.676726e-05	1.842499e-05	2.155304e-05	2.791286e-05	4.081130e-05	6.639242e-05	1.178682e-04	2.211690e-04	4.258394e-04	8.362055e-04	
GPU on rank 1 and GPU on rank 3:	1.051307e-06	1.050949e-06	1.057386e-06	1.002550e-06	9.917021e-07	1.007318e-06	1.020432e-06	1.323819e-06	1.434207e-06	1.752973e-06	2.152085e-06	3.027678e-06	2.895606e-05	1.589656e-05	1.665449e-05	1.837611e-05	2.142787e-05	2.786040e-05	4.088879e-05	6.697655e-05	1.188719e-04	2.226353e-04	4.258037e-04	8.350849e-04	
GPU on rank 1 and GPU on rank 4:	2.099276e-06	2.076387e-06	2.126813e-06	2.120852e-06	2.125382e-06	2.150059e-06	2.451181e-06	2.497435e-06	2.593160e-06	3.126860e-06	6.431460e-06	6.891966e-06	2.395654e-05	2.497315e-05	2.679813e-05	3.032088e-05	5.418539e-05	7.234931e-05	9.982586e-05	1.430357e-04	2.547836e-04	4.722834e-04	9.004116e-04	1.740396e-03	
GPU on rank 1 and GPU on rank 5:	2.157211e-06	2.058148e-06	2.069592e-06	2.207518e-06	2.073526e-06	2.103567e-06	2.426147e-06	2.493262e-06	2.593875e-06	3.130913e-06	9.072661e-06	6.886721e-06	2.351761e-05	2.444065e-05	2.630377e-05	2.978921e-05	5.342841e-05	7.173777e-05	9.899497e-05	1.412547e-04	2.516389e-04	4.663467e-04	8.905530e-04	1.731122e-03	
GPU on rank 1 and GPU on rank 6:	2.149105e-06	2.126217e-06	2.190351e-06	2.184391e-06	2.189040e-06	2.243996e-06	2.552390e-06	2.622485e-06	2.741218e-06	3.219485e-06	6.444335e-06	6.734967e-06	2.369475e-05	2.466285e-05	2.644503e-05	2.991199e-05	5.364418e-05	7.191658e-05	9.906054e-05	1.415288e-04	2.518249e-04	4.677773e-04	8.913755e-04	1.734424e-03	
GPU on rank 1 and GPU on rank 7:	2.135038e-06	2.099991e-06	2.288938e-06	2.163768e-06	2.168775e-06	2.204061e-06	2.528310e-06	2.607107e-06	2.790570e-06	3.125548e-06	6.341219e-06	6.706595e-06	2.378201e-05	2.474868e-05	2.636528e-05	2.999783e-05	5.420804e-05	7.246733e-05	1.002276e-04	1.419139e-04	2.524161e-04	4.677892e-04	8.918405e-04	1.735115e-03	
GPU on rank 2 and GPU on rank 3:	7.520914e-07	7.382631e-07	7.495880e-07	7.477999e-07	7.379055e-07	7.485151e-07	7.691383e-07	7.572174e-07	8.094311e-07	8.391142e-07	1.067042e-06	1.320004e-06	2.716362e-05	1.468360e-05	1.530480e-05	1.643538e-05	1.855731e-05	2.238393e-05	2.986550e-05	4.485726e-05	7.485628e-05	1.358390e-04	2.557755e-04	4.957080e-04	
GPU on rank 2 and GPU on rank 4:	2.144337e-06	2.137065e-06	2.230167e-06	2.220035e-06	2.238631e-06	2.284288e-06	2.581358e-06	2.612829e-06	2.782583e-06	3.183603e-06	6.578803e-06	6.798863e-06	2.431262e-05	2.533495e-05	2.701092e-05	3.041387e-05	5.473495e-05	7.314444e-05	1.006722e-04	1.437104e-04	2.558661e-04	4.741192e-04	8.998036e-04	1.742375e-03	
GPU on rank 2 and GPU on rank 5:	2.133846e-06	2.117038e-06	2.187490e-06	2.196431e-06	2.209544e-06	2.238989e-06	2.543092e-06	2.586246e-06	2.776980e-06	3.178477e-06	6.497860e-06	6.705999e-06	2.367282e-05	2.470529e-05	2.638829e-05	3.002763e-05	6.300449e-05	7.245183e-05	9.994268e-05	1.420164e-04	2.527630e-04	4.679441e-04	8.913875e-04	1.732516e-03	
GPU on rank 2 and GPU on rank 6:	2.238154e-06	2.235770e-06	2.267599e-06	2.269030e-06	2.270222e-06	2.296805e-06	2.655387e-06	2.705336e-06	2.905726e-06	3.234148e-06	6.626725e-06	6.998777e-06	2.411926e-05	2.513051e-05	2.667105e-05	3.031731e-05	5.450606e-05	7.281423e-05	1.001370e-04	1.422215e-04	2.531683e-04	4.689813e-04	8.919358e-04	1.733947e-03	
GPU on rank 2 and GPU on rank 7:	2.135158e-06	2.121329e-06	2.166510e-06	2.170324e-06	2.189755e-06	2.234221e-06	2.584577e-06	2.692461e-06	2.828836e-06	3.257871e-06	6.456733e-06	6.877303e-06	2.403188e-05	2.499151e-05	2.652192e-05	3.013968e-05	5.424500e-05	7.260442e-05	1.003361e-04	1.421702e-04	2.529895e-04	4.683018e-04	8.928537e-04	1.733053e-03	
GPU on rank 3 and GPU on rank 4:	2.124906e-06	2.127647e-06	2.147913e-06	2.138376e-06	2.175093e-06	2.214074e-06	2.556086e-06	3.802776e-06	2.825260e-06	3.130078e-06	6.470680e-06	6.877899e-06	2.426302e-05	2.526808e-05	2.706134e-05	3.059268e-05	5.459070e-05	7.263303e-05	1.001537e-04	1.435316e-04	2.551103e-04	4.744053e-04	8.988976e-04	1.741385e-03	
GPU on rank 3 and GPU on rank 5:	2.107620e-06	2.097607e-06	2.151132e-06	2.134085e-06	2.129316e-06	2.198696e-06	2.521515e-06	2.577066e-06	2.820253e-06	3.110647e-06	6.428957e-06	6.734967e-06	2.379262e-05	2.475452e-05	2.649188e-05	3.002286e-05	5.374193e-05	7.204652e-05	9.936094e-05	1.417959e-04	2.521098e-04	4.683137e-04	8.925319e-04	1.732790e-03	
GPU on rank 3 and GPU on rank 6:	2.164483e-06	2.168655e-06	2.214789e-06	2.222061e-06	2.213478e-06	2.268553e-06	2.583504e-06	2.655387e-06	2.838731e-06	3.200531e-06	6.539941e-06	6.909013e-06	2.390385e-05	2.493834e-05	2.651310e-05	3.014207e-05	5.393744e-05	7.216692e-05	9.930730e-05	1.418924e-04	2.522635e-04	4.681945e-04	9.676218e-04	1.733327e-03	
GPU on rank 3 and GPU on rank 7:	2.104044e-06	2.090573e-06	2.121568e-06	2.265573e-06	2.133965e-06	2.188563e-06	2.511263e-06	2.585769e-06	2.684236e-06	3.191829e-06	6.214142e-06	6.923914e-06	2.377713e-05	2.469397e-05	2.643490e-05	3.012538e-05	5.359411e-05	7.190585e-05	9.935021e-05	1.417100e-04	2.518892e-04	4.681349e-04	8.926630e-04	1.734316e-03	


app 0: ./time_ping_pong_gpu 
rank: 0: { host: 1; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 1: { host: 1; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 2: { host: 1; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 3: { host: 1; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 4: { host: 2; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 5: { host: 2; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 6: { host: 2; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 7: { host: 2; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0

------------------------------------------------------------
Sender: LSF System <lsfadmin@lassen710>
Subject: Job 2422265: <ping_pong_gpu_mvapich> in cluster <lassen> Done

Job <ping_pong_gpu_mvapich> was submitted from host <lassen709> by user <locksl> in cluster <lassen> at Tue Apr 13 11:14:40 2021
Job was executed on host(s) <1*lassen710>, in queue <pdebug>, as user <locksl> in cluster <lassen> at Tue Apr 13 11:14:43 2021
                            <40*lassen32>
                            <40*lassen28>
</g/g16/locksl> was used as the home directory.
</g/g16/locksl/bin/bench_press_scripts> was used as the working directory.
Started at Tue Apr 13 11:14:43 2021
Terminated at Tue Apr 13 11:15:37 2021
Results reported at Tue Apr 13 11:15:37 2021

Your job looked like:

------------------------------------------------------------
# LSBATCH: User input
#!/bin/bash
#BSUB -J ping_pong_gpu_mvapich
#BSUB -e ping_pong_gpu_mvapich.%J.err
#BSUB -o ping_pong_gpu_mvapich.%J.out
#BSUB -nnodes 2
#BSUB -q pdebug
#BSUB -W 00:15

module load gcc
module load cuda
module load mvapich2

# Default paramter values for mvapich2
export MV2_USE_CUDA=1
export MV2_USE_GDR=1

# TESTING PARAMETER
#export MV2_CUDA_BLOCK_SIZE=131072
#export MV2_CUDA_BLOCK_SIZE=262144
#export MV2_CUDA_BLOCK_SIZE=524288
export MV2_CUDA_BLOCK_SIZE=786432
#export MV2_CUDA_BLOCK_SIZE=1048576
#export MV2_CUDA_BLOCK_SIZE=1310720

export MV2_GPUDIRECT_LIMIT=8192
export MV2_USE_GPUDIRECT_RECEIVE_LIMIT=131072
export MV2_CUDA_IPC_THRESHOLD=32768
#export MV2_CUDA_IPC_THRESHOLD=524288

# Parameters for tuning block size limit for gpu to cpu memory copies with gdr
export MV2_GDRCOPY_LIMIT=8192

# Parameter setting for Multi-IB and Multi-GPU node
#export MV2_PROCESS_TO_RAIL_MAPPING=BUNCH # not currently working with multiple resource set allocation

cd /g/g16/locksl/BenchPress/mvapich_build/examples

nvidia-cuda-mps-control -d

#jsrun -a4 -c4 -g4 -r1 -n2 -M "-gpu" --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./time_ping_pong_gpu
jsrun -a4 -c4 -g4 -r1 -n2 --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./time_ping_pong_gpu

echo quit | nvidia-cuda-mps-control



------------------------------------------------------------

Successfully completed.

Resource usage summary:

    CPU time :                                   0.24 sec.
    Max Memory :                                 44 MB
    Average Memory :                             32.57 MB
    Total Requested Memory :                     -
    Delta Memory :                               -
    Max Swap :                                   1380 MB
    Max Processes :                              4
    Max Threads :                                23
    Run time :                                   54 sec.
    Turnaround time :                            57 sec.

The output (if any) is above this job summary.



PS:

Read file <ping_pong_gpu_mvapich.2422265.err> for stderr output of this job.

