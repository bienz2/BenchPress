Warning: Failed writing log files to directory [/var/log/nvidia-mps]. No logs will be available.
Profiling GPU Ping-Pongs
GPU on rank 0 and GPU on rank 1:	8.918047e-07	8.718967e-07	8.653402e-07	7.814169e-07	7.301569e-07	8.118153e-07	8.704662e-07	9.267330e-07	9.815693e-07	1.114249e-06	1.295447e-06	1.750946e-06	2.834308e-05	1.492655e-05	1.559043e-05	1.672029e-05	1.865625e-05	2.252817e-05	3.012180e-05	4.517555e-05	
GPU on rank 0 and GPU on rank 2:	1.082659e-06	1.071572e-06	1.061320e-06	9.666681e-07	9.692907e-07	9.992123e-07	1.075506e-06	1.303077e-06	1.453519e-06	1.722455e-06	2.114773e-06	3.345966e-06	2.843809e-05	1.549685e-05	1.628542e-05	1.810074e-05	2.091527e-05	2.743840e-05	4.020452e-05	6.549835e-05	
GPU on rank 0 and GPU on rank 3:	1.075983e-06	1.079440e-06	1.062274e-06	9.720325e-07	9.887218e-07	1.024365e-06	1.031876e-06	1.285911e-06	1.494884e-06	1.734376e-06	2.175093e-06	3.062129e-06	2.914774e-05	1.571465e-05	1.645494e-05	1.818776e-05	2.129555e-05	2.787948e-05	4.060149e-05	6.640434e-05	
GPU on rank 0 and GPU on rank 4:	2.059460e-06	3.174782e-06	2.088904e-06	2.097368e-06	2.107978e-06	2.154946e-06	2.358556e-06	2.448320e-06	2.521992e-06	3.038049e-06	6.350756e-06	6.830454e-06	2.410722e-05	2.514720e-05	2.778256e-05	3.085375e-05	5.516768e-05	7.345915e-05	1.101029e-04	1.521719e-04	
GPU on rank 0 and GPU on rank 5:	2.057195e-06	2.057433e-06	2.084613e-06	2.102017e-06	2.109647e-06	2.139926e-06	2.416730e-06	2.442002e-06	2.549171e-06	3.110409e-06	6.196380e-06	6.871581e-06	2.372563e-05	2.598238e-05	2.656353e-05	3.040195e-05	5.473614e-05	7.312536e-05	1.097631e-04	1.521242e-04	
GPU on rank 0 and GPU on rank 6:	2.146482e-06	6.401658e-06	2.188683e-06	2.187729e-06	2.192140e-06	2.217412e-06	2.577662e-06	2.666473e-06	2.786875e-06	3.200173e-06	6.484747e-06	6.863713e-06	2.536273e-05	2.654982e-05	2.696002e-05	3.075719e-05	5.511880e-05	7.340908e-05	1.101661e-04	1.524103e-04	
GPU on rank 0 and GPU on rank 7:	2.114534e-06	2.130508e-06	2.173424e-06	6.227851e-06	3.222108e-06	2.202034e-06	2.467275e-06	2.574563e-06	2.723575e-06	3.093362e-06	6.403446e-06	6.780267e-06	2.390528e-05	2.497804e-05	2.725792e-05	3.082633e-05	5.536795e-05	7.313967e-05	1.099205e-04	1.520431e-04	
GPU on rank 1 and GPU on rank 2:	1.044989e-06	1.040459e-06	1.034975e-06	9.897947e-07	9.744167e-07	1.010776e-06	1.071811e-06	1.210093e-06	1.345873e-06	1.703620e-06	2.055526e-06	2.899289e-06	2.888930e-05	1.584840e-05	1.654744e-05	1.814127e-05	2.140880e-05	2.791643e-05	4.058480e-05	6.647110e-05	
GPU on rank 1 and GPU on rank 3:	1.036763e-06	1.049280e-06	1.043439e-06	9.747744e-07	9.821653e-07	1.050949e-06	1.057744e-06	1.304150e-06	1.464248e-06	1.793742e-06	2.145290e-06	3.064752e-06	2.887261e-05	1.588857e-05	1.658618e-05	1.819134e-05	2.141237e-05	2.782345e-05	4.083276e-05	6.683469e-05	
GPU on rank 1 and GPU on rank 4:	2.025127e-06	2.020836e-06	2.060890e-06	2.074718e-06	2.066612e-06	2.085924e-06	2.424717e-06	3.496170e-06	2.570748e-06	3.058076e-06	6.350040e-06	6.831288e-06	2.332962e-05	2.437496e-05	2.619302e-05	3.030419e-05	5.418658e-05	7.252574e-05	1.096451e-04	1.512396e-04	
GPU on rank 1 and GPU on rank 5:	2.031446e-06	2.020836e-06	2.080679e-06	2.093434e-06	2.101898e-06	2.137184e-06	2.408385e-06	2.465844e-06	2.557158e-06	3.066659e-06	6.244659e-06	6.809831e-06	2.337801e-05	2.438176e-05	2.640641e-05	3.023148e-05	5.436659e-05	7.270336e-05	1.096225e-04	1.515937e-04	
GPU on rank 1 and GPU on rank 6:	2.136707e-06	2.121091e-06	2.152681e-06	2.144814e-06	2.156615e-06	2.203703e-06	2.542734e-06	2.571344e-06	2.752542e-06	3.132701e-06	6.551027e-06	6.765366e-06	2.383196e-05	2.480674e-05	2.658570e-05	3.046632e-05	5.448222e-05	7.290602e-05	1.094973e-04	1.517260e-04	
GPU on rank 1 and GPU on rank 7:	2.090693e-06	2.091050e-06	2.127647e-06	2.106667e-06	2.112389e-06	2.146363e-06	2.477527e-06	2.567530e-06	2.741694e-06	3.097177e-06	8.956313e-06	6.794453e-06	2.346110e-05	2.451837e-05	2.629852e-05	3.007412e-05	5.407810e-05	7.251024e-05	1.090062e-04	1.514959e-04	
GPU on rank 2 and GPU on rank 3:	7.448196e-07	7.418394e-07	7.393360e-07	7.874966e-07	7.479191e-07	7.605553e-07	7.623434e-07	7.747412e-07	8.454323e-07	8.907318e-07	1.042962e-06	1.288295e-06	2.724099e-05	1.491880e-05	1.550186e-05	1.687884e-05	1.882911e-05	2.258778e-05	3.016949e-05	4.533768e-05	
GPU on rank 2 and GPU on rank 4:	2.159595e-06	5.555272e-06	2.214909e-06	2.205133e-06	2.219081e-06	2.253771e-06	2.610207e-06	2.658725e-06	2.808571e-06	3.254056e-06	6.564617e-06	6.960154e-06	2.396774e-05	2.495539e-05	2.663052e-05	3.044367e-05	5.467653e-05	7.290721e-05	1.094842e-04	1.527059e-04	
GPU on rank 2 and GPU on rank 5:	2.160668e-06	2.162814e-06	2.194047e-06	2.177596e-06	2.196431e-06	2.226353e-06	2.533078e-06	2.589107e-06	2.766252e-06	3.499031e-06	6.526113e-06	6.801844e-06	2.382946e-05	3.328753e-05	2.655590e-05	3.016233e-05	5.436420e-05	7.258058e-05	1.094031e-04	1.515961e-04	
GPU on rank 2 and GPU on rank 6:	2.212644e-06	2.207279e-06	2.273679e-06	2.279639e-06	2.285123e-06	2.308488e-06	2.714872e-06	2.707601e-06	2.903819e-06	3.225207e-06	6.688356e-06	6.910324e-06	2.453423e-05	2.543843e-05	2.695584e-05	3.048062e-05	5.470634e-05	7.297516e-05	1.097226e-04	1.520252e-04	
GPU on rank 2 and GPU on rank 7:	2.166390e-06	2.154946e-06	2.224445e-06	2.224684e-06	2.231717e-06	2.396345e-06	2.577186e-06	2.670527e-06	2.773166e-06	3.262758e-06	6.552577e-06	6.900072e-06	2.404904e-05	2.496493e-05	2.657187e-05	3.008127e-05	5.447388e-05	7.256269e-05	1.090300e-04	1.516044e-04	
GPU on rank 3 and GPU on rank 4:	2.134800e-06	2.119541e-06	2.137423e-06	2.145886e-06	2.149820e-06	2.217412e-06	6.188989e-06	2.639294e-06	2.832890e-06	3.183842e-06	6.566286e-06	6.869197e-06	2.383304e-05	2.486324e-05	2.663350e-05	3.059030e-05	6.362200e-05	7.267714e-05	1.095498e-04	1.516759e-04	
GPU on rank 3 and GPU on rank 5:	2.134562e-06	2.205491e-06	2.169132e-06	2.168298e-06	2.176762e-06	2.250910e-06	2.506614e-06	2.566576e-06	2.789497e-06	3.116369e-06	6.509542e-06	6.758451e-06	2.384484e-05	2.483642e-05	2.667975e-05	3.006816e-05	5.432606e-05	7.267833e-05	1.093149e-04	1.517975e-04	
GPU on rank 3 and GPU on rank 6:	2.169847e-06	2.154589e-06	2.199411e-06	2.191782e-06	2.212167e-06	2.260804e-06	2.602816e-06	2.641320e-06	2.785325e-06	3.236890e-06	6.533504e-06	6.925225e-06	2.450585e-05	2.548647e-05	2.699482e-05	3.059030e-05	5.496979e-05	7.323980e-05	1.099634e-04	1.520860e-04	
GPU on rank 3 and GPU on rank 7:	2.142072e-06	2.146840e-06	2.170801e-06	2.113223e-06	2.138615e-06	2.205253e-06	2.463579e-06	2.533436e-06	2.656341e-06	3.210425e-06	6.299019e-06	6.899834e-06	2.385628e-05	2.481484e-05	2.647150e-05	2.996564e-05	5.417347e-05	7.246256e-05	1.090729e-04	1.604915e-04	


app 0: ./time_ping_pong_gpu 
rank: 0: { host: 1; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 1: { host: 1; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 2: { host: 1; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 3: { host: 1; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 4: { host: 2; cpu: {0-3}, {4-7,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 5: { host: 2; cpu: {4-7}, {0-3,80-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 6: { host: 2; cpu: {80-83}, {0-7,84-87} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0
rank: 7: { host: 2; cpu: {84-87}, {0-7,80-83} ; gpu: {0,1,2,3} ; mem: {0-16301,163036-179337} } : app 0

------------------------------------------------------------
Sender: LSF System <lsfadmin@lassen710>
Subject: Job 2421967: <ping_pong_gpu_mvapich> in cluster <lassen> Done

Job <ping_pong_gpu_mvapich> was submitted from host <lassen709> by user <locksl> in cluster <lassen> at Tue Apr 13 08:54:46 2021
Job was executed on host(s) <1*lassen710>, in queue <pdebug>, as user <locksl> in cluster <lassen> at Tue Apr 13 08:54:48 2021
                            <40*lassen32>
                            <40*lassen31>
</g/g16/locksl> was used as the home directory.
</g/g16/locksl/bin/bench_press_scripts> was used as the working directory.
Started at Tue Apr 13 08:54:48 2021
Terminated at Tue Apr 13 08:55:12 2021
Results reported at Tue Apr 13 08:55:12 2021

Your job looked like:

------------------------------------------------------------
# LSBATCH: User input
#!/bin/bash
#BSUB -J ping_pong_gpu_mvapich
#BSUB -e ping_pong_gpu_mvapich.%J.err
#BSUB -o ping_pong_gpu_mvapich.%J.out
#BSUB -nnodes 2
#BSUB -q pdebug
#BSUB -W 00:15

module load gcc
module load cuda
module load mvapich2

# Default paramter values for mvapich2
export MV2_USE_CUDA=1
export MV2_USE_GDR=1

# TESTING PARAMETER
#export MV2_CUDA_BLOCK_SIZE=262144
#export MV2_CUDA_BLOCK_SIZE=524288
#export MV2_CUDA_BLOCK_SIZE=786432
#export MV2_CUDA_BLOCK_SIZE=1048576
export MV2_CUDA_BLOCK_SIZE=1310720

export MV2_GPUDIRECT_LIMIT=8192
export MV2_USE_GPUDIRECT_RECEIVE_LIMIT=131072
export MV2_CUDA_IPC_THRESHOLD=32768
#export MV2_CUDA_IPC_THRESHOLD=524288

# Parameters for tuning block size limit for gpu to cpu memory copies with gdr
export MV2_GDRCOPY_LIMIT=8192

# Parameter setting for Multi-IB and Multi-GPU node
#export MV2_PROCESS_TO_RAIL_MAPPING=BUNCH # not currently working with multiple resource set allocation

cd /g/g16/locksl/BenchPress/mvapich_build/examples

nvidia-cuda-mps-control -d

#jsrun -a4 -c4 -g4 -r1 -n2 -M "-gpu" --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./time_ping_pong_gpu
jsrun -a4 -c4 -g4 -r1 -n2 --latency_priority=gpu-cpu --launch_distribution=packed --print_placement=1 ./time_ping_pong_gpu

echo quit | nvidia-cuda-mps-control



------------------------------------------------------------

Successfully completed.

Resource usage summary:

    CPU time :                                   0.18 sec.
    Max Memory :                                 -
    Average Memory :                             -
    Total Requested Memory :                     -
    Delta Memory :                               -
    Max Swap :                                   -
    Max Processes :                              -
    Max Threads :                                -
    Run time :                                   23 sec.
    Turnaround time :                            26 sec.

The output (if any) is above this job summary.



PS:

Read file <ping_pong_gpu_mvapich.2421967.err> for stderr output of this job.

